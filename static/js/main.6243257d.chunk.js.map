{"version":3,"sources":["Constants.js","HelperMethods.js","components/Navbar/Navbar.js","components/Home/Home.js","components/Modals/NewCategoryModal.js","components/Modals/NewBookModal.js","components/Books/Books.js","components/Modals/ModalForbidden.js","components/Reservations/UserTable.js","components/Reservations/AdminTable.js","components/Modals/MessageModal.js","components/Reservations/Reservations.js","components/Profile/Profile.js","components/SignForms/SignIn.js","components/SignForms/SignUp.js","components/Books/BookDetails.js","components/Profile/User.js","components/Profile/UserList.js","App.js","index.js"],"names":["USER_PERMISSIONS","admin","librarian","student","RESERVATION_STATUS","signOut","sessionStorage","clear","window","location","href","redirectHome","getUserPermissions","getItem","jwtData","split","decodedJwtJsonData","atob","JSON","parse","role","handleErrorResponse","response","status","data","message","sortAlphabetically","set","sort","a","b","transformUserRole","userRole","Navbar","token","React","useState","isMenuOpen","setIsMenuOpen","isProfileOptionsOpen","setProfileOptionsOpen","className","onClick","to","activeClassName","pathname","state","prevPath","Home","NewCategoryModal","props","categoryName","undefined","errorMessage","addCategory","bind","handleOnChange","element","this","setState","target","name","value","newCategory","categories","includes","axios","post","then","updateCategories","setCategoryModalStatus","catch","error","type","placeholder","autoComplete","onChange","disabled","Component","NewBookModal","displayedCategories","bookName","bookAuthor","bookQuantity","bookImage","bookCategories","addBook","addCategoryToBook","deleteCategoryFromBook","newBook","author","image","quantity","updateBooks","setBookModalStatus","category","push","splice","indexOf","map","selected","Books","books","displayedBooks","selectedCategory","chosenCategories","isCategoryModalOpen","isBookModalOpen","categoryFilter","pop","length","filter","book","find","updatedBooks","updatedCategories","slice","get","URLSearchParams","search","handleFilter","categorySet","userPermissions","checked","htmlFor","clearFilter","text","id","src","alt","substring","ModalForbidden","UserTable","displayedReservations","changeBookStatus","date","Date","toLocaleString","AdminTable","user","firstName","lastName","MessageModal","setModalStatus","Reservations","bookId","match","params","reservations","statusSet","isModalOpen","forbidden","statusFilter","reservation","reservationId","put","updatedReservation","findIndex","x","style","Profile","userInfo","userContact","newPassword","repassword","address","city","zipCode","phoneNumber","isPasswordModalOpen","saveUserContact","updateUserPassword","email","password","setPasswordModalStatus","minLength","maxLength","readOnly","pattern","SignIn","signIn","credentials","setItem","defaults","headers","common","SignUp","isNextFormSelected","signUp","selectNextForm","selectPreviousForm","BookDetails","availableCopies","addReservation","updateBook","updatedBook","updatedBookData","console","log","bookData","Object","keys","User","userId","UserList","users","updateUserRole","userIndex","obj","App","exact","path","component","baseURL","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+VAAaA,EAAmB,CAC5BC,MAAO,aACPC,UAAW,iBACXC,QAAS,gBAGAC,EACC,WADDA,EAEE,YAFFA,EAGC,WCPP,SAASC,IACZC,eAAeC,QACfC,OAAOC,SAASC,KAAO,QAQpB,SAASC,IACZH,OAAOC,SAASC,KAAO,QAGpB,SAASE,IACZ,GAAuC,OAApCN,eAAeO,QAAQ,SAAmB,CACzC,IACIC,EADUR,eAAeO,QAAQ,SACjBE,MAAM,KAAK,GAC3BC,EAAqBR,OAAOS,KAAKH,GAErC,OADqBI,KAAKC,MAAMH,GACVI,KAG1B,OAAO,KAGJ,SAASC,EAAoBC,GAChC,OAAIA,EAE0B,MAApBA,EAASC,OAGRD,EAASE,KAAKC,aAFrBpB,IAFO,0BAQR,SAASqB,EAAmBC,GAC/B,OAAOA,EAAIC,MAAK,SAAUC,EAAGC,GACzB,OAAID,EAAIC,GAAa,EACjBD,EAAIC,EAAY,EACb,KAIR,SAASC,EAAkBC,GAC9B,OAAOA,GACH,KAAKhC,EAAiBG,QAClB,MAAO,UACX,KAAKH,EAAiBE,UAClB,MAAO,eACX,QACI,MAAO,W,WCuBJ+B,EArEA,SAAC,GAAe,IAAbC,EAAY,EAAZA,MAAY,EAEUC,IAAMC,UAAS,GAFzB,mBAEnBC,EAFmB,KAEPC,EAFO,OAG4BH,IAAMC,UAAS,GAH3C,mBAGnBG,EAHmB,KAGGC,EAHH,KAK1B,OACI,gCACI,qBAAKC,UAAU,OAAf,SACI,+CAEJ,sBAAKA,UAAU,SAASC,QAAS,kBAAMJ,GAAeD,IAAtD,UACI,qBAAKI,UAAU,UACf,qBAAKA,UAAU,UACf,qBAAKA,UAAU,aAEnB,qBAAIA,UAAWJ,EAAa,aAAe,GAA3C,UACI,6BACI,cAAC,IAAD,CAASM,GAAG,QAAQC,gBAAgB,SAASF,QAAS,kBAAMJ,GAAc,IAA1E,qCAEJ,6BACI,cAAC,IAAD,CAASK,GAAG,SAASC,gBAAgB,SAASF,QAAS,kBAAMJ,GAAc,IAA3E,iCAEFJ,GAAS,6BACP,cAAC,IAAD,CAASS,GAAG,gBAAgBC,gBAAgB,SAASF,QAAS,kBAAMJ,GAAc,IAAlF,0BAEFJ,GAAStB,MAA8BZ,EAAiBC,OAAS,6BAC/D,cAAC,IAAD,CAAS0C,GAAG,SAASC,gBAAgB,SAASF,QAAS,kBAAMJ,GAAc,IAA3E,gCAEFJ,GAAS,qBAAIO,UAAU,eAAeC,QAAS,kBAAMF,GAAuBD,IAAnE,oBACA,mBAAGE,UAAU,yBAEtBF,GAAwB,oBAAIE,UAAU,eAAd,SACtB,cAAC,IAAD,CAAME,GAAG,WAAWD,QAAS,kBAAMJ,GAAc,IAAjD,6BAEFC,GAAwB,oBAAIE,UAAU,eAAd,SACtB,cAAC,IAAD,CAAME,GAAG,QAAQD,QAAS,WAAOJ,GAAc,GAAQjC,KAAvD,iCAED6B,GAAS,oBAAIO,UAAU,eAAd,SACR,cAAC,IAAD,CAAME,GAAI,CAACE,SAAS,WAAYC,MAAO,CAACC,SAAUvC,OAAOC,SAASoC,WAAaH,QAAS,kBAAMJ,GAAc,IAA5G,iCAEDJ,GAAS,oBAAIO,UAAU,eAAd,SACR,cAAC,IAAD,CAAME,GAAG,WAAWD,QAAS,kBAAMJ,GAAc,IAAjD,2CAGNJ,EACE,sBAAKO,UAAU,UAAUC,QAAS,kBAAMF,GAAuBD,IAA/D,oBACW,mBAAGE,UAAU,sBACpB,qBAAKA,UAAYF,EAAuB,yCAA2C,kBAAnF,SACI,+BACI,6BACI,cAAC,IAAD,CAAMI,GAAG,WAAWD,QAAS,kBAAMJ,GAAc,IAAjD,6BAEJ,oBAAII,QAAS,kBAAMrC,KAAnB,sCAKZ,sBAAKoC,UAAU,iBAAf,UACI,qBAAKA,UAAU,UAAf,SACI,cAAC,IAAD,CAAME,GAAI,CAACE,SAAS,WAAYC,MAAO,CAACC,SAAUvC,OAAOC,SAASoC,WAAYH,QAAS,kBAAMJ,GAAc,IAA3G,gCAEJ,qBAAKG,UAAU,UAAf,SACI,cAAC,IAAD,CAAME,GAAG,WAAWD,QAAS,kBAAMJ,GAAc,IAAjD,+C,OC/BTU,G,MAnCF,WACT,OACI,sBAAKP,UAAU,UAAf,UACI,kFACA,sBAAKA,UAAU,cAAf,UACI,sXAKA,gIACA,+BACI,yLACyG,yDADzG,OAGA,wJACkF,2CADlF,OAGA,uEACiC,kCADjC,yBAGA,mNAGA,iHACuD,kCADvD,iCAGA,+BACI,kCADJ,6FACoF,kDADpF,kB,mEC2CLQ,E,kDAnEX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAEDJ,MAAQ,CACTK,kBAAcC,EACdC,kBAAcD,GAGlB,EAAKE,YAAc,EAAKA,YAAYC,KAAjB,gBACnB,EAAKC,eAAiB,EAAKA,eAAeD,KAApB,gBATP,E,kDAYnB,SAAeE,GAAU,IAAD,EACpBC,KAAKC,UAAL,mBACKF,EAAQG,OAAOC,KAAOJ,EAAQG,OAAOE,OAD1C,kCAEkBV,GAFlB,M,yBAMJ,WAAe,IAAD,OACJW,EAAc,CAChBF,KAAMH,KAAKZ,MAAMK,cAGhBO,KAAKR,MAAMc,WAAWC,SAASP,KAAKZ,MAAMK,cAkB3CO,KAAKC,SAAS,CACVN,aAAc,oCAlBlBa,IAAMC,KAAK,0BAA2BJ,GACjCK,MAAK,WAEF,EAAKlB,MAAMmB,iBAAiB,EAAKvB,MAAMK,cAEvC,EAAKQ,SAAS,CACVR,kBAAcC,IAGlB,EAAKF,MAAMoB,wBAAuB,MAErCC,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVN,aAAchC,EAAoBmD,EAAMlD,iB,oBAU5D,WAAU,IAAD,SAEgCoC,KAAKZ,MAApCK,EAFD,EAECA,aAAcE,EAFf,EAEeA,aAEpB,OACI,qBAAKZ,UAAU,QAAf,SACI,sBAAKA,UAAU,kBAAf,UACI,mBAAGA,UAAU,gBAAgBC,QAAS,kBAAM,EAAKQ,MAAMoB,wBAAuB,MAC9E,sBAAK7B,UAAU,YAAf,UACI,yDACA,uBAAOgC,KAAK,OAAOZ,KAAK,eAAea,YAAY,kBAAkBC,aAAa,MAAMC,SAAUlB,KAAKF,iBACtGH,GAAgB,qBAAKZ,UAAU,gBAAf,SAAgCY,IACjD,wBAAQwB,UAAW1B,EAAcT,QAASgB,KAAKJ,YAA/C,+B,GA9DOwB,aCuHhBC,E,kDArHX,WAAY7B,GAAQ,IAAD,8BACf,cAAMA,IAEDJ,MAAQ,CACTkC,oBAAqB,EAAK9B,MAAMc,WAChCiB,cAAU7B,EACV8B,gBAAY9B,EACZ+B,kBAAc/B,EACdgC,eAAWhC,EACXiC,eAAgB,GAChBhC,kBAAcD,GAGlB,EAAKkC,QAAU,EAAKA,QAAQ/B,KAAb,gBACf,EAAKC,eAAiB,EAAKA,eAAeD,KAApB,gBACtB,EAAKgC,kBAAoB,EAAKA,kBAAkBhC,KAAvB,gBACzB,EAAKiC,uBAAyB,EAAKA,uBAAuBjC,KAA5B,gBAhBf,E,kDAmBnB,SAAeE,GAAU,IAAD,EACpBC,KAAKC,UAAL,mBACKF,EAAQG,OAAOC,KAAOJ,EAAQG,OAAOE,OAD1C,kCAEkBV,GAFlB,M,qBAMJ,WAAW,IAAD,OACAqC,EAAU,CACZ5B,KAAMH,KAAKZ,MAAMmC,SACjBS,OAAQhC,KAAKZ,MAAMoC,WACnBS,MAAOjC,KAAKZ,MAAMsC,UAClBQ,SAAUlC,KAAKZ,MAAMqC,aACrBnB,WAAYN,KAAKZ,MAAMuC,gBAG3BnB,IAAMC,KAAK,qBAAsBsB,GAC5BrB,MAAK,SAAA9C,GACF,EAAK4B,MAAM2C,YAAYvE,EAASE,MAEhC,EAAKmC,SAAS,CACVsB,cAAU7B,EACV8B,gBAAY9B,EACZgC,eAAWhC,EACX+B,kBAAc/B,EACdiC,eAAgB,GAChBL,oBAAqB,KAGzB,EAAK9B,MAAM4C,oBAAmB,MAEjCvB,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVN,aAAchC,EAAoBmD,EAAMlD,iB,+BAKxD,SAAkBmC,GACd,IAAMsC,EAAWtC,EAAQG,OAAOE,MADT,EAEuBJ,KAAKZ,MAA7CuC,EAFiB,EAEjBA,eAAgBL,EAFC,EAEDA,oBACtBK,EAAeW,KAAKD,GACpBf,EAAoBiB,OAAOjB,EAAoBkB,QAAQH,GAAW,GAElErC,KAAKC,SAAS,CACV0B,eAAgBA,EAChBL,oBAAqBA,M,oCAI7B,SAAuBe,GAAW,IAAD,EACiBrC,KAAKZ,MAA7CuC,EADuB,EACvBA,eAAgBL,EADO,EACPA,oBACtBK,EAAeY,OAAOZ,EAAea,QAAQH,GAAW,GACxDf,EAAoBgB,KAAKD,GAEzBrC,KAAKC,SAAS,CACV0B,eAAgBA,EAChBL,oBAAqBA,M,oBAI7B,WAAU,IAAD,SAE2FtB,KAAKZ,MAA/FmC,EAFD,EAECA,SAAUC,EAFX,EAEWA,WAAYC,EAFvB,EAEuBA,aAAcE,EAFrC,EAEqCA,eAAgBL,EAFrD,EAEqDA,oBAAqB3B,EAF1E,EAE0EA,aAE/E,OACI,qBAAKZ,UAAU,QAAf,SACI,sBAAKA,UAAU,kBAAf,UACI,mBAAGA,UAAU,eAAeC,QAAS,kBAAM,EAAKQ,MAAM4C,oBAAmB,MACzE,sBAAKrD,UAAU,YAAf,UACI,iEACA,uBAAOgC,KAAK,OAAOZ,KAAK,WAAWa,YAAY,+BAAgBC,aAAa,OAAOC,SAAUlB,KAAKF,iBAClG,uBAAOiB,KAAK,OAAOZ,KAAK,aAAaa,YAAY,QAAQC,aAAa,OAAOC,SAAUlB,KAAKF,iBAC5F,uBAAOiB,KAAK,OAAOZ,KAAK,YAAYa,YAAY,qBAAgBC,aAAa,OAAOC,SAAUlB,KAAKF,iBACnG,uBAAOiB,KAAK,SAASZ,KAAK,eAAea,YAAY,8BAAoBC,aAAa,OAAOC,SAAUlB,KAAKF,iBAC5G,qBAAKf,UAAU,qBAAf,SACK4C,IAAmB,IAAMA,EAAec,KAAI,SAACJ,GAAD,OACzC,sBAAoBtD,UAAU,gBAAgBC,QAAS,kBAAM,EAAK8C,uBAAuBO,IAAzF,UACKA,EAAS,mBAAGtD,UAAU,0BADjBsD,QAMlB,yBAAQlC,KAAK,mBAAmBuC,SAAS,qBAAqBxB,SAAUlB,KAAK6B,kBAA7E,UACI,wDACCP,GAAuBA,EAAoBmB,KAAI,SAACJ,GAAD,OAC5C,iCAAwBA,GAAXA,SAGpB1C,GAAgB,qBAAKZ,UAAU,gBAAf,SAAgCY,IACjD,wBAAQwB,UAAWI,IAAaC,IAAeC,EAAczC,QAASgB,KAAK4B,QAA3E,+B,GA/GGR,aC+KZuB,E,kDAzKX,WAAYnD,GAAQ,IAAD,8BACf,cAAMA,IAEDJ,MAAQ,CACTwD,MAAO,GACPC,eAAgB,GAChBC,sBAAkBpD,EAClBY,WAAY,GACZyC,iBAAkB,GAClBC,qBAAqB,EACrBC,iBAAiB,EACjBtD,kBAAcD,GAGlB,EAAKyC,YAAc,EAAKA,YAAYtC,KAAjB,gBACnB,EAAKc,iBAAmB,EAAKA,iBAAiBd,KAAtB,gBAExB,EAAKe,uBAAyB,EAAKA,uBAAuBf,KAA5B,gBAC9B,EAAKuC,mBAAqB,EAAKA,mBAAmBvC,KAAxB,gBAlBX,E,gDAqBnB,SAAawC,GACT,IAAIa,EAAiBlD,KAAKZ,MAAM2D,iBAChCG,EAAe3C,SAAS8B,GAAYa,EAAeC,IAAId,GAAYa,EAAeZ,KAAKD,GACnFa,EAAeE,OAAS,EACxBpD,KAAKC,SAAS,CACV8C,iBAAkBG,EAClBL,eAAgB7C,KAAKZ,MAAMwD,MAAMS,QAAO,SAACC,GACrC,OAAOA,EAAKhD,WAAWiD,MAAK,gBAAGpD,EAAH,EAAGA,KAAH,OAAc+C,EAAe3C,SAASJ,WAI1EH,KAAKC,SAAS,CACV4C,eAAgB7C,KAAKZ,MAAMwD,U,yBAKvC,WACI5C,KAAKC,SAAS,CACV8C,iBAAkB,GAClBF,eAAgB7C,KAAKZ,MAAMwD,U,oCAInC,SAAuB/E,GACnBmC,KAAKC,SAAS,CACV+C,oBAAqBnF,M,gCAI7B,SAAmBA,GACfmC,KAAKC,SAAS,CACVgD,gBAAiBpF,M,yBAIzB,SAAYkE,GACR,IAAIyB,EAAexD,KAAKZ,MAAMwD,MAC9BY,EAAalB,KAAKP,GAElB/B,KAAKC,SAAS,CACV2C,MAAOY,M,8BAIf,SAAiBnD,GACb,IAAIoD,EAAoBzD,KAAKZ,MAAMkB,WACnCmD,EAAkBnB,KAAKjC,GAEvBL,KAAKC,SAAS,CACVK,WAAYtC,EAAmByF,GAAmBC,QAClDpC,oBAAqBtD,EAAmByF,GAAmBC,Y,+BAInE,WAAqB,IAAD,OAChBlD,IAAMmD,IAAI,cACLjD,MAAK,SAAA9C,GACF,EAAKqC,SAAS,CACV2C,MAAOhF,EAASE,KAChB+E,eAAgBjF,EAASE,OAG7B,IACMuE,EADS,IAAIuB,gBAAgB,EAAKpE,MAAMzC,SAAS8G,QAC/BF,IAAI,YACZ,MAAZtB,GAAkB,EAAKyB,aAAazB,MAE3CxB,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVN,aAAchC,EAAoBmD,EAAMlD,eAIpD4C,IAAMmD,IAAI,mBACLjD,MAAK,SAAA9C,GACF,IAAImG,EAAcnG,EAASE,KAAK2E,KAAI,qBAAGtC,QAEvC,EAAKF,SAAS,CACVK,WAAYtC,EAAmB+F,GAAaL,QAC5CpC,oBAAqBtD,EAAmB+F,GAAaL,aAG5D7C,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVN,aAAchC,EAAoBmD,EAAMlD,iB,oBAKxD,WAAU,IAAD,SAEwFoC,KAAKZ,MAA5FyD,EAFD,EAECA,eAAgBvC,EAFjB,EAEiBA,WAAYyC,EAF7B,EAE6BA,iBAAkBC,EAF/C,EAE+CA,oBAAqBC,EAFpE,EAEoEA,gBAEnEe,EAAkB9G,IAExB,OACI,sBAAK6B,UAAU,UAAf,UACMiE,GAAuB,cAAC,EAAD,CACG1C,WAAaA,EACbM,uBAAyBZ,KAAKY,uBAC9BD,iBAAmBX,KAAKW,mBAClDsC,GAAmB,cAAC,EAAD,CACO3C,WAAaA,EACb8B,mBAAqBpC,KAAKoC,mBAC1BD,YAAcnC,KAAKmC,cAC/C,sBAAKpD,UAAU,SAAf,UACI,8CACA,qBAAKA,UAAU,mBAAf,SACKuB,GAAcA,EAAWmC,KAAI,SAACJ,GAAD,OAC1B,sBAAKtD,UAAU,cAAf,UACI,uBAAOgC,KAAK,WAAWZ,KAAMkC,EAAUnB,SAAU,kBAAM,EAAK4C,aAAazB,IAAW4B,QAASlB,EAAiBxC,SAAS8B,KACvH,uBAAO6B,QAAS7B,EAAhB,SAA2BA,MAFGA,QAM1C,sBAAKtD,UAAU,eAAf,WACOiF,IAAoB1H,EAAiBC,OAASyH,IAAoB1H,EAAiBE,YAClF,wBAAQuC,UAAU,QAAQC,QAAU,kBAAM,EAAK4B,wBAAwBoC,IAAvE,kCACJ,wBAAQhE,QAAS,kBAAM,EAAKmF,eAA5B,qCAGR,sBAAKpF,UAAU,iBAAf,WACMiF,IAAoB1H,EAAiBC,OAASyH,IAAoB1H,EAAiBE,YACjF,sBAAKuC,UAAU,gBAAgBC,QAAS,kBAAM,EAAKoD,oBAAmB,IAAtE,UACI,mBAAGrD,UAAU,uBACb,qBAAKA,UAAU,YAAf,SACI,mEAIX8D,GAAkBA,EAAeJ,KAAI,gBLxGxB2B,EKwG2BC,EAAH,EAAGA,GAAIlE,EAAP,EAAOA,KAAM6B,EAAb,EAAaA,OAAQC,EAArB,EAAqBA,MAArB,OAClC,mBAAcjF,KAAO,UAAYqH,EAAjC,SACI,sBAAKtF,UAAsB,OAAVkD,EAAiB,gBAAkB,OAApD,UACgB,OAAVA,EAAiB,qBAAmBqC,IAAKrC,EAAOsC,IAAMpE,GAA1B8B,GAAsC,mBAAGlD,UAAU,kBACjF,sBAAKA,UAAU,YAAf,UACI,8BL7GFqF,EK6G0BjE,EL5GrDiE,EAAKhB,OAAS,GACNgB,EAAKI,UAAU,EAAG,IAAM,MAExBJ,KK0GqB,8BAAOpC,WALVqC,SAWW,IAA1BxB,EAAeO,QAAgB,qBAAKrE,UAAU,aAAf,mE,GArK7BqC,aCeLqD,G,MAnBQ,SAAC,GAAc,IAAZ1D,EAAW,EAAXA,KAEtB,OACI,qBAAKhC,UAAU,QAAf,SACI,sBAAKA,UAAU,kBAAf,UACI,oDACEgC,GAAQA,IAASzE,EAAiBC,MAChC,uIAEA,yGACFwE,GAAQA,IAASzE,EAAiBC,MAChC,iCAAQ,cAAC,IAAD,CAAM0C,GAAI,CAAEE,SAAU,QAASC,MAAO,CAAEC,SAAUvC,OAAOC,SAASoC,WAAlE,qCAER,iCAAQ,cAAC,IAAD,CAAMF,GAAI,CAAEE,SAAU,WAAYC,MAAO,CAAEC,SAAUvC,OAAOC,SAASoC,WAArE,uCCsBbuF,EArCG,SAAC,GAAgD,IAA/CC,EAA8C,EAA9CA,sBAAuBC,EAAuB,EAAvBA,iBAEvC,OACI,kCACI,gCACI,+BACI,mDACA,iDACA,wCACA,qDAGR,gCACKD,GAAyBA,EAAsBlC,KAAI,gBAAG4B,EAAH,EAAGA,GAAIf,EAAP,EAAOA,KAAMuB,EAAb,EAAaA,KAAMhH,EAAnB,EAAmBA,OAAnB,OAChD,+BACI,6BACI,mBAAGb,KAAM,UAAYsG,EAAKe,GAA1B,SAA+Bf,EAAKnD,SAExC,6BAAK,IAAI2E,KAAKD,GAAME,mBACpB,+BACKlH,IAAWnB,GAA+B,mBAC1CmB,IAAWnB,GAAgC,mBAC3CmB,IAAWnB,GAA+B,iBAE/C,+BACKmB,IAAWnB,GACR,wBAAQsC,QAAS,kBAAM4F,EAAiBP,EAAI3H,IAA5C,qBACHmB,IAAWnB,GACR,wBAAQsC,QAAS,kBAAM4F,EAAiBP,EAAI3H,IAA5C,gCAdH2H,YCoBdW,EAlCI,SAAC,GAA+B,IAA7BL,EAA4B,EAA5BA,sBAElB,OACI,kCACI,gCACI,+BACI,iDACA,mDACA,iDACA,6CAGR,gCACKA,GAAyBA,EAAsBlC,KAAI,gBAAG4B,EAAH,EAAGA,GAAIf,EAAP,EAAOA,KAAMuB,EAAb,EAAaA,KAAMhH,EAAnB,EAAmBA,OAAQoH,EAA3B,EAA2BA,KAA3B,OAChD,+BACI,6BACI,oBAAGjI,KAAM,UAAYiI,EAAKZ,GAA1B,UAAgCY,EAAKC,UAArC,IAAmDD,EAAKE,aADnDF,EAAKZ,IAGd,6BACI,mBAAGrH,KAAM,UAAYsG,EAAKe,GAA1B,SAA+Bf,EAAKnD,SAExC,6BAAK,IAAI2E,KAAKD,GAAME,mBACpB,+BACKlH,IAAWnB,GAA+B,mBAC1CmB,IAAWnB,GAAgC,mBAC3CmB,IAAWnB,GAA+B,mBAX1C2H,YCLde,EAXM,SAAC,GAAiC,IAA/BrH,EAA8B,EAA9BA,QAASsH,EAAqB,EAArBA,eAE7B,OACI,qBAAKtG,UAAU,QAAf,SACI,sBAAKA,UAAU,kBAAf,UACI,mBAAGA,UAAU,gBAAgBC,QAAS,kBAAMqG,GAAe,MAC3D,8BAAMtH,UC4LPuH,E,kDAtLX,WAAY9F,GAAQ,IAAD,8BACf,cAAMA,IAEDJ,MAAQ,CACTmG,OAAQ,EAAK/F,MAAMgG,MAAMC,OAAOF,OAChCG,aAAc,GACdf,sBAAuB,GACvBgB,UAAW,GACXC,aAAa,EACb7H,aAAS2B,EACTmG,WAAW,GAIf,EAAKjB,iBAAmB,EAAKA,iBAAiB/E,KAAtB,gBAGxB,EAAKwF,eAAiB,EAAKA,eAAexF,KAApB,gBAjBP,E,gDAoBnB,SAAahC,GACT,IAAIiI,EAAe9F,KAAKZ,MAAMuG,UAC9BG,EAAavF,SAAS1C,GAAUiI,EAAa3C,IAAItF,GAAUiI,EAAaxD,KAAKzE,GAGzEiI,EAAa1C,OAAS,EACtBpD,KAAKC,SAAS,CACV0F,UAAWG,EACXnB,sBAAuB3E,KAAKZ,MAAMsG,aAAarC,QAAO,SAAC0C,GACnD,OAAOD,EAAavF,SAASwF,EAAYlI,aAMjDmC,KAAKC,SAAS,CACV0E,sBAAuB3E,KAAKZ,MAAMsG,iB,yBAK9C,WACI1F,KAAKC,SAAS,CACV0F,UAAW,GACXhB,sBAAuB3E,KAAKZ,MAAMsG,iB,4BAI1C,SAAe7H,GACXmC,KAAKC,SAAS,CACV2F,YAAa/H,M,8BAIrB,SAAiBmI,EAAenI,GAAS,IAAD,OACpC2C,IAAMyF,IAAI,qBAAuBD,EAAgB,cAAgBnI,GAC5D6C,MAAK,SAAA9C,GAEF,IAAMsI,EAAqBtI,EAASE,KAG9B4H,EAAiB,EAAKtG,MAAtBsG,aACNA,EAAaA,EAAaS,WAAU,SAAAC,GAAC,OAAIA,EAAE/B,KAAO6B,EAAmB7B,OAAO6B,EAE5E,IAAInI,EAAU,GAEVA,EADAF,IAAWnB,EACD,wGAEA,8CAGd,EAAKuD,SAAS,CACVyF,aAAcA,EAAahC,QAC3BiB,sBAAuBe,EAAahC,QACpCkC,aAAa,EACb7H,QAASA,OAGhB8C,OAAM,SAAAC,GACH,EAAKb,SAAS,CACV2F,aAAa,EACb7H,QAASJ,EAAoBmD,EAAMlD,iB,+BAKnD,WAAqB,IAAD,OACVoG,EAAkB9G,IACpB8G,IAAoB1H,EAAiBC,OAASyH,IAAoB1H,EAAiBE,UACnFgE,IAAMmD,IAAI,6BACLjD,MAAK,SAAA9C,GACF,IAAME,EAAOF,EAASE,KACtB,EAAKmC,SAAS,CACVyF,aAAc5H,EAAK4F,QACnBiB,sBAAuB7G,EAAK4F,aAGnC7C,OAAM,SAAAC,GACH,EAAKb,SAAS,CACV2F,aAAa,EACb7H,QAASJ,EAAoBmD,EAAMlD,eAI/C4C,IAAMmD,IAAI,qBACLjD,MAAK,SAAA9C,GACF,IAAME,EAAOF,EAASE,KACtB,EAAKmC,SAAS,CACVyF,aAAc5H,EAAK4F,QACnBiB,sBAAuB7G,EAAK4F,aAGnC7C,OAAM,SAAAC,GACH,EAAKb,SAAS,CACV2F,aAAa,EACb7H,QAASJ,EAAoBmD,EAAMlD,eAKX,OAApChB,eAAeO,QAAQ,UACvB6C,KAAKC,SAAS,CACV4F,WAAW,M,oBAKvB,WAAU,IAAD,SAEuE7F,KAAKZ,MAA3EuF,EAFD,EAECA,sBAAuBgB,EAFxB,EAEwBA,UAAWC,EAFnC,EAEmCA,YAAa7H,EAFhD,EAEgDA,QAAS8H,EAFzD,EAEyDA,UAExD7B,EAAkB9G,IAExB,OAAO2I,EACH,cAAC,EAAD,IAEC,sBAAK9G,UAAU,UAAf,UACI6G,GAAe,cAAC,EAAD,CAAc7H,QAAUA,EAAUsH,eAAgBrF,KAAKqF,iBACvE,sBAAKtG,UAAU,SAAf,UACI,2CACA,sBAAKA,UAAU,mBAAf,UACI,sBAAKA,UAAU,cAAf,UACI,uBAAOgC,KAAK,WAAWZ,KAAK,WACxBe,SAAU,kBAAM,EAAK4C,aAAapH,IAClCuH,QAAS0B,EAAUpF,SAAS7D,KAChC,uBAAOwH,QAAQ,WAAf,kCAEJ,sBAAKnF,UAAU,cAAf,UACI,uBAAOgC,KAAK,WAAWZ,KAAK,YACxBe,SAAU,kBAAM,EAAK4C,aAAapH,IAClCuH,QAAS0B,EAAUpF,SAAS7D,KAChC,uBAAOwH,QAAQ,YAAf,iCAEJ,sBAAKnF,UAAU,cAAf,UACI,uBAAOgC,KAAK,WAAWZ,KAAK,WACxBe,SAAU,kBAAM,EAAK4C,aAAapH,IAClCuH,QAAS0B,EAAUpF,SAAS7D,KAChC,uBAAOwH,QAAQ,WAAf,+BAGR,qBAAKnF,UAAU,eAAesH,MAAO,CAAE,UAAa,QAApD,SACI,wBAAQrH,QAAS,kBAAM,EAAKmF,eAA5B,oCAGNQ,EAAsBvB,OAAS,EAC7B,8BACMY,IAAoB1H,EAAiBG,QACnC,cAAC,EAAD,CACIkI,sBAAuBA,EACvBC,iBAAkB5E,KAAK4E,mBAE3B,cAAC,EAAD,CACID,sBAAuBA,MAInC,qBAAK5F,UAAU,aAAf,8D,GAlLON,IAAM2C,WCkNlBkF,G,wDAnNX,WAAY9G,GAAQ,IAAD,8BACf,cAAMA,IAEDJ,MAAQ,CACTmH,SAAU,GACVC,YAAa,GACbC,iBAAa/G,EACbgH,gBAAYhH,EACZiH,aAASjH,EACTkH,UAAMlH,EACNmH,aAASnH,EACToH,iBAAapH,EACbkG,aAAa,EACbmB,qBAAqB,EACrBhJ,aAAS2B,EACTmG,WAAW,GAIf,EAAKmB,gBAAkB,EAAKA,gBAAgBnH,KAArB,gBACvB,EAAKoH,mBAAqB,EAAKA,mBAAmBpH,KAAxB,gBAG1B,EAAKC,eAAiB,EAAKA,eAAeD,KAApB,gBACtB,EAAKwF,eAAiB,EAAKA,eAAexF,KAApB,gBAxBP,E,kDA2BnB,SAAeE,GACXC,KAAKC,SAAL,eACKF,EAAQG,OAAOC,KAAOJ,EAAQG,OAAOE,U,4BAI9C,SAAevC,GACXmC,KAAKC,SAAS,CACV2F,YAAa/H,EACbE,aAAS2B,M,oCAIjB,SAAuB7B,GACnBmC,KAAKC,SAAS,CACV8G,oBAAqBlJ,M,gCAI7B,WAAsB,IAAD,OACjB,GAAImC,KAAKZ,MAAMqH,cAAgBzG,KAAKZ,MAAMsH,WACtC,GAAI1G,KAAKZ,MAAMqH,YAAYrD,OAAS,EAAG,CACnC,IAAMtF,EAAO,CACToJ,MAAOlH,KAAKZ,MAAMmH,SAASW,MAC3BhC,UAAWlF,KAAKZ,MAAMmH,SAASrB,UAC/BC,SAAUnF,KAAKZ,MAAMmH,SAASpB,SAC9BgC,SAAUnH,KAAKZ,MAAMqH,aAGzBjG,IAAMyF,IAAI,qBAAsBnI,GAC3B4C,MAAK,WACF,EAAKT,SAAS,CACVlC,QAAS,yDACTgJ,qBAAqB,EACrBnB,aAAa,OAGpB/E,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVlC,QAASJ,EAAoBmD,EAAMlD,oBAI/CoC,KAAKC,SAAS,CACVlC,QAAS,wCAIjBiC,KAAKC,SAAS,CACVlC,QAAS,+C,6BAKrB,WAAmB,IAAD,OACRD,EAAO,CACT6I,QAAS3G,KAAKZ,MAAMuH,QACpBC,KAAM5G,KAAKZ,MAAMwH,KACjBC,QAAS7G,KAAKZ,MAAMyH,QACpBC,YAAa9G,KAAKZ,MAAM0H,aAG5BtG,IAAMyF,IAAI,qBAAsBnI,GAC3B4C,MAAK,WACF,EAAKT,SAAS,CACVlC,QAAS,8DACT6H,aAAa,OAGpB/E,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVlC,QAASJ,EAAoBmD,EAAMlD,iB,+BAKnD,WAAqB,IAAD,OAChB4C,IAAMmD,IAAI,sBACLjD,MAAK,SAAA9C,GACF,EAAKqC,SAAS,CACVsG,SAAU3I,EAASE,UAG1B+C,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVlC,QAASJ,EAAoBmD,EAAMlD,eAI/C4C,IAAMmD,IAAI,sBACLjD,MAAK,SAAA9C,GACF,IAAM4I,EAAc5I,EAASE,KAC7B,EAAKmC,SAAS,CACV0G,QAASH,EAAYG,QACrBC,KAAMJ,EAAYI,KAClBC,QAASL,EAAYK,QACrBC,YAAaN,EAAYM,iBAGhCjG,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVlC,QAASJ,EAAoBmD,EAAMlD,eAIP,OAApChB,eAAeO,QAAQ,UACvB6C,KAAKC,SAAS,CACV4F,WAAW,M,oBAKvB,WAAU,IAAD,SAE4E7F,KAAKZ,MAAhFmH,EAFD,EAECA,SAAUE,EAFX,EAEWA,YAAaC,EAFxB,EAEwBA,WAAYC,EAFpC,EAEoCA,QAASC,EAF7C,EAE6CA,KAAMC,EAFnD,EAEmDA,QAASC,EAF5D,EAE4DA,YAF5D,EAI0D9G,KAAKZ,MAA9DwG,EAJD,EAICA,YAAamB,EAJd,EAIcA,oBAAqBhJ,EAJnC,EAImCA,QAExC,OANK,EAI4C8H,UAG7C,cAAC,EAAD,IAEC,sBAAK9G,UAAU,UAAf,UACK6G,GAAe,cAAC,EAAD,CAAc7H,QAAUA,EAAUsH,eAAiBrF,KAAKqF,iBACvE0B,GAAuB,qBAAKhI,UAAU,QAAf,SACrB,sBAAKA,UAAU,kBAAf,UACI,mBAAGA,UAAU,eAAeC,QAAS,kBAAM,EAAKoI,wBAAuB,MACvE,sBAAKrI,UAAU,YAAf,UACI,mDACA,uBAAOgC,KAAK,WAAWZ,KAAK,cAAca,YAAY,aAAQqG,UAAU,IAAIC,UAAU,KAAKpG,SAAUlB,KAAKF,iBAC1G,uBAAOiB,KAAK,WAAWZ,KAAK,aAAaa,YAAY,wBAAgBqG,UAAU,IAAIC,UAAU,KAAKpG,SAAUlB,KAAKF,iBAEhH/B,GAAW,qBAAKgB,UAAU,gBAAf,SAAgChB,IAC5C,wBAAQoD,UAAWsF,IAAgBC,EAAY1H,QAASgB,KAAKiH,mBAA7D,4BAIZ,sBAAKlI,UAAU,eAAf,UACI,sBAAKA,UAAU,YAAf,UACI,8CACA,sBAAKA,UAAU,YAAf,UACI,2CACA,uBAAOqB,MAAOmG,EAASW,MAAOK,UAAQ,OAE1C,sBAAKxI,UAAU,YAAf,UACI,+CACA,uBAAOqB,MAAOmG,EAASrB,UAAWqC,UAAQ,OAE9C,sBAAKxI,UAAU,YAAf,UACI,8CACA,uBAAOqB,MAAOmG,EAASpB,SAAUoC,UAAQ,OAE7C,qBAAKxI,UAAU,mBAAf,SACI,wBAAQC,QAAS,kBAAM,EAAKoI,wBAAuB,IAAnD,wCAIR,sBAAKrI,UAAU,eAAf,UACI,iDACA,sBAAKA,UAAU,YAAf,UACI,2CACA,uBAAOgC,KAAK,OAAOZ,KAAK,UAAUC,MAAOuG,EAAS1F,aAAa,OAAOC,SAAUlB,KAAKF,oBAEzF,sBAAKf,UAAU,YAAf,UACI,2DACA,uBAAOgC,KAAK,OAAOZ,KAAK,OAAOC,MAAOwG,EAAM3F,aAAa,OAAOC,SAAUlB,KAAKF,oBAEnF,sBAAKf,UAAU,YAAf,UACI,kDACA,uBAAOgC,KAAK,OAAOZ,KAAK,UAAUC,MAAOyG,EAASW,QAAQ,OAAMF,UAAU,IAAIrG,aAAa,OAAOC,SAAUlB,KAAKF,oBAErH,sBAAKf,UAAU,YAAf,UACI,6CACA,uBAAOgC,KAAK,OAAOZ,KAAK,cAAcC,MAAO0G,EAAaU,QAAQ,OAAMF,UAAU,IAAIrG,aAAa,OAAOC,SAAUlB,KAAKF,oBAE7H,qBAAKf,UAAU,mBAAf,SACI,wBAAQC,QAASgB,KAAKgH,gBAAtB,mC,GA5MNvI,IAAM2C,YC4EbqG,G,wDA5EX,WAAYjI,GAAQ,IAAD,8BACf,cAAMA,IAEDJ,MAAQ,CACT8H,WAAOxH,EACPyH,cAAUzH,EACVC,kBAAcD,GAGlB,EAAKI,eAAiB,EAAKA,eAAeD,KAApB,gBACtB,EAAK6H,OAAS,EAAKA,OAAO7H,KAAZ,gBAVC,E,kDAanB,SAAeE,GACXC,KAAKC,SAAL,eACKF,EAAQG,OAAOC,KAAOJ,EAAQG,OAAOE,U,oBAI9C,WAAU,IAAD,OACL,GAAIJ,KAAKZ,MAAM8H,OAASlH,KAAKZ,MAAM+H,SAAU,CAEzC,IAAMQ,EAAc,CAChBT,MAAOlH,KAAKZ,MAAM8H,MAClBC,SAAUnH,KAAKZ,MAAM+H,UAGzB3G,IAAMC,KAAK,oBAAqBkH,GAC3BjH,MAAK,SAAA9C,GAIF,GAHAhB,eAAegL,QAAQ,QAAShK,EAASE,KAAKU,OAC9CgC,IAAMqH,SAASC,QAAQC,OAAvB,cAAiD,UAAYnK,EAASE,KAAKU,WAE1CkB,IAA9B,EAAKF,MAAMzC,SAASqC,MAAqB,CAAC,IACjCC,EAAa,EAAKG,MAAMzC,SAASqC,MAAjCC,SACRvC,OAAOC,SAASC,KAAOqC,OAEvBvC,OAAOC,SAASC,KAAO,WAG9B6D,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVN,aAAchC,EAAoBmD,EAAMlD,oBAIpDoC,KAAKC,SAAS,CACVN,aAAc,oC,+BAK1B,WAC4C,OAApC/C,eAAeO,QAAQ,UACvBF,M,oBAIR,WAAU,IAAD,EACmC+C,KAAKZ,MAAvC8H,EADD,EACCA,MAAOC,EADR,EACQA,SAAUxH,EADlB,EACkBA,aAEvB,OACI,qBAAKZ,UAAU,UAAf,SACI,sBAAKA,UAAU,YAAf,UACI,2CACA,uBAAOgC,KAAK,OAAOZ,KAAK,QAAQa,YAAY,SAASC,aAAa,UAAUC,SAAUlB,KAAKF,iBAC3F,uBAAOiB,KAAK,WAAWZ,KAAK,WAAWa,YAAY,aAAQE,SAAUlB,KAAKF,iBAExEH,GAAgB,qBAAKZ,UAAU,gBAAf,SAAgCY,IAElD,wBAAQwB,UAAY+F,IAAUC,EAAWnI,QAASgB,KAAK0H,OAAvD,uC,GAvECjJ,IAAM2C,YCsHZ4G,E,kDApHX,WAAYxI,GAAQ,IAAD,8BACf,cAAMA,IAEDJ,MAAQ,CACT8F,eAAWxF,EACXyF,cAAUzF,EACVwH,WAAOxH,EACPyH,cAAUzH,EACVgH,gBAAYhH,EACZiH,aAASjH,EACTkH,UAAMlH,EACNmH,aAASnH,EACToH,iBAAapH,EACbuI,oBAAoB,EACpBtI,kBAAcD,GAGlB,EAAKwI,OAAS,EAAKA,OAAOrI,KAAZ,gBACd,EAAKC,eAAiB,EAAKA,eAAeD,KAApB,gBAlBP,E,0CAqBnB,WAAU,IAAD,OACC/B,EAAO,CACToH,UAAWlF,KAAKZ,MAAM8F,UACtBC,SAAUnF,KAAKZ,MAAM+F,SACrB+B,MAAOlH,KAAKZ,MAAM8H,MAClBC,SAAUnH,KAAKZ,MAAM+H,SACrBR,QAAS3G,KAAKZ,MAAMuH,QACpBC,KAAM5G,KAAKZ,MAAMwH,KACjBC,QAAS7G,KAAKZ,MAAMyH,QACpBC,YAAa9G,KAAKZ,MAAM0H,aAG5BtG,IAAMC,KAAK,gBAAiB3C,GAC3B4C,MAAK,SAAA9C,GACFd,OAAOC,SAASC,KAAO,cAE1B6D,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVN,aAAchC,EAAoBmD,EAAMlD,iB,gCAKpD,WACIoC,KAAKC,SAAS,CACVgI,oBAAoB,M,4BAI5B,WACQjI,KAAKZ,MAAM+H,WAAanH,KAAKZ,MAAMsH,WAChC1G,KAAKZ,MAAM+H,SAAS/D,OAAS,EAC5BpD,KAAKC,SAAS,CACVgI,oBAAoB,EACpBtI,kBAAcD,IAGlBM,KAAKC,SAAS,CACVN,aAAc,iGAItBK,KAAKC,SAAS,CACVN,aAAc,+C,4BAK1B,SAAeI,GACXC,KAAKC,SAAL,eACKF,EAAQG,OAAOC,KAAOJ,EAAQG,OAAOE,U,+BAI9C,WAC4C,OAApCxD,eAAeO,QAAQ,UACvBF,M,oBAIR,WAAU,IAAD,SAE6H+C,KAAKZ,MAAjI8F,EAFD,EAECA,UAAWC,EAFZ,EAEYA,SAAU+B,EAFtB,EAEsBA,MAAOC,EAF7B,EAE6BA,SAAUT,EAFvC,EAEuCA,WAAYC,EAFnD,EAEmDA,QAASC,EAF5D,EAE4DA,KAAMC,EAFlE,EAEkEA,QAASC,EAF3E,EAE2EA,YAAamB,EAFxF,EAEwFA,mBAAoBtI,EAF5G,EAE4GA,aAEjH,OACI,qBAAKZ,UAAU,UAAf,SACI,sBAAKA,UAAU,YAAf,UACI,wDACA,sBAAKA,UAAS,oBAAekJ,EAAqB,iBAAmB,kBAArE,UACI,uBAAOlH,KAAK,OAAOZ,KAAK,YAAYa,YAAY,YAAOC,aAAa,OAAOC,SAAUlB,KAAKF,iBAC1F,uBAAOiB,KAAK,OAAOZ,KAAK,WAAWa,YAAY,WAAWC,aAAa,OAAOC,SAAUlB,KAAKF,iBAC7F,uBAAOiB,KAAK,QAAQZ,KAAK,QAAQa,YAAY,SAASC,aAAa,OAAOC,SAAUlB,KAAKF,iBACzF,uBAAOiB,KAAK,WAAWZ,KAAK,WAAWa,YAAY,aAASqG,UAAU,IAAIC,UAAU,KAAKpG,SAAUlB,KAAKF,iBACxG,uBAAOiB,KAAK,WAAWZ,KAAK,aAAaa,YAAY,wBAAgBqG,UAAU,IAAIC,UAAU,KAAKpG,SAAUlB,KAAKF,iBAEhHH,GAAgB,qBAAKZ,UAAU,gBAAf,SAAgCY,IACjD,wBAAQwB,UAAW+D,IAAcC,IAAa+B,IAAUC,IAAaT,EAAY1H,QAAS,kBAAM,EAAKmJ,kBAArG,sBAGJ,sBAAKpJ,UAAS,uBAAkBkJ,EAAqB,gBAAkB,mBAAvE,UACI,uBAAOlH,KAAK,OAAOZ,KAAK,UAAUa,YAAY,QAAQC,aAAa,OAAOC,SAAUlB,KAAKF,iBACzF,uBAAOiB,KAAK,OAAOZ,KAAK,OAAOa,YAAY,wBAAcC,aAAa,OAAOC,SAAUlB,KAAKF,iBAC5F,uBAAOiB,KAAK,OAAOZ,KAAK,UAAUa,YAAY,eAAewG,QAAQ,OAAMF,UAAU,IAAIrG,aAAa,OAAOC,SAAUlB,KAAKF,iBAC5H,uBAAOiB,KAAK,OAAOZ,KAAK,cAAca,YAAY,iBAAiBwG,QAAQ,OAAMF,UAAU,IAAIrG,aAAa,OAAOC,SAAUlB,KAAKF,iBAEjIH,GAAgB,qBAAKZ,UAAU,gBAAf,SAAgCY,IACjD,wBAAQZ,UAAU,YAAYC,QAAS,kBAAM,EAAKoJ,sBAAlD,0BACA,wBAAQjH,UAAWwF,IAAYC,IAASC,IAAYC,EAAa9H,QAASgB,KAAKkI,OAA/E,kD,GA9GHzJ,IAAM2C,WC+OZiH,E,kDA3OX,WAAY7I,GAAQ,IAAD,8BACf,cAAMA,IAEDJ,MAAQ,CACTmG,OAAQ,EAAK/F,MAAMgG,MAAMC,OAAOF,OAChCjC,KAAM,GACN/B,cAAU7B,EACV8B,gBAAY9B,EACZgC,eAAWhC,EACX+B,kBAAc/B,EACdiC,eAAgB,GAChB2G,qBAAiB5I,EACjBkG,aAAa,EACb3C,iBAAiB,EACjBlF,aAAS2B,GAIb,EAAK6I,eAAiB,EAAKA,eAAe1I,KAApB,gBACtB,EAAK2I,WAAa,EAAKA,WAAW3I,KAAhB,gBAGlB,EAAKgC,kBAAoB,EAAKA,kBAAkBhC,KAAvB,gBACzB,EAAKiC,uBAAyB,EAAKA,uBAAuBjC,KAA5B,gBAC9B,EAAKC,eAAiB,EAAKA,eAAeD,KAApB,gBACtB,EAAKwF,eAAiB,EAAKA,eAAexF,KAApB,gBAzBP,E,kDA4BnB,WAAkB,IAAD,OACbW,IAAMC,KAAK,qBAAuBT,KAAKZ,MAAMmG,QACxC7E,MAAK,SAAA9C,GACF,EAAKqC,SAAS,CACV2F,aAAa,EACb7H,QAAS,qFAGhB8C,OAAM,SAAAC,GACH,EAAKb,SAAS,CACV2F,aAAa,EACb7H,QAASJ,EAAoBmD,EAAMlD,iB,wBAKnD,WAAc,IAAD,OACH6K,EAAc,CAChBtI,KAAMH,KAAKZ,MAAMmC,SACjBS,OAAQhC,KAAKZ,MAAMoC,WACnBS,MAAOjC,KAAKZ,MAAMsC,UAClBQ,SAAUlC,KAAKZ,MAAMqC,aACrBnB,WAAYN,KAAKZ,MAAMuC,gBAG3BnB,IAAMyF,IAAI,sBAAwBjG,KAAKZ,MAAMmG,OAAQkD,GAChD/H,MAAK,SAAA9C,GACF,IAAM8K,EAAkB9K,EAASE,KAAKwF,KACtC,EAAKrD,SAAS,CACVqD,KAAMoF,EACNnH,SAAUmH,EAAgBvI,KAC1BqB,WAAYkH,EAAgB1G,OAC5BN,UAAWgH,EAAgBzG,MAC3BR,aAAciH,EAAgBxG,SAC9BP,eAAgB+G,EAAgBpI,WAAWmC,KAAI,qBAAGtC,QAClDmI,gBAAiB1K,EAASE,KAAKwK,gBAC/BrF,iBAAiB,OAGxBpC,OAAM,SAAAC,GACH6H,QAAQC,IAAI9H,GACZ,EAAKb,SAAS,CACVN,aAAchC,EAAoBmD,EAAMlD,iB,4BAKxD,SAAeC,GACXmC,KAAKC,SAAS,CACV2F,YAAa/H,M,gCAIrB,SAAmBA,GACfmC,KAAKC,SAAS,CACVgD,gBAAiBpF,M,4BAIzB,SAAekC,GAAU,IAAD,EACpBC,KAAKC,UAAL,mBACKF,EAAQG,OAAOC,KAAOJ,EAAQG,OAAOE,OAD1C,kCAEkBV,GAFlB,M,+BAMJ,SAAkBK,GACd,IAAMsC,EAAWtC,EAAQG,OAAOE,MADT,EAEuBJ,KAAKZ,MAA7CuC,EAFiB,EAEjBA,eAAgBL,EAFC,EAEDA,oBACtBK,EAAeW,KAAKD,GACpBf,EAAoBiB,OAAOjB,EAAoBkB,QAAQH,GAAW,GAElErC,KAAKC,SAAS,CACV0B,eAAgBA,EAChBL,oBAAqBA,M,oCAI7B,SAAuBe,GAAW,IAAD,EACiBrC,KAAKZ,MAA7CuC,EADuB,EACvBA,eAAgBL,EADO,EACPA,oBACtBK,EAAeY,OAAOZ,EAAea,QAAQH,GAAW,GACxDf,EAAoBgB,KAAKD,GAEzBrC,KAAKC,SAAS,CACV0B,eAAgBA,EAChBL,oBAAqBA,M,+BAI7B,WAAqB,IAAD,OAChBd,IAAMmD,IAAI,cAAgB3D,KAAKZ,MAAMmG,QAChC7E,MAAK,SAAA9C,GACF,IAAMiL,EAAWjL,EAASE,KAAKwF,KAC/B,EAAKrD,SAAS,CACVqD,KAAMuF,EACNtH,SAAUsH,EAAS1I,KACnBqB,WAAYqH,EAAS7G,OACrBN,UAAWmH,EAAS5G,MACpBR,aAAcoH,EAAS3G,SACvBP,eAAgBkH,EAASvI,WAAWmC,KAAI,qBAAGtC,QAC3CmI,gBAAiB1K,EAASE,KAAKwK,qBAGtCzH,OAAM,SAAAC,GACH,EAAKb,SAAS,CACV2F,aAAa,EACb7H,QAASJ,EAAoBmD,EAAMlD,eAI/C4C,IAAMmD,IAAI,mBACLjD,MAAK,SAAA9C,GACF,IAAImG,EAAcnG,EAASE,KAAK2E,KAAI,qBAAGtC,QACvC4D,EAAcA,EAAY7F,MAAK,SAAUC,EAAGC,GACxC,OAAID,EAAIC,GAAa,EACjBD,EAAIC,EAAY,EACb,KAGX,EAAK6B,SAAS,CACVK,WAAYyD,EAAYL,QACxBpC,oBAAqByC,EAAYL,aAGxC7C,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVN,aAAchC,EAAoBmD,EAAMlD,iB,oBAKxD,WAAU,IAAD,SAG+GoC,KAAKZ,MAAnHkE,EAHD,EAGCA,KAAM/B,EAHP,EAGOA,SAAUC,EAHjB,EAGiBA,WAAYE,EAH7B,EAG6BA,UAAWD,EAHxC,EAGwCA,aAAcE,EAHtD,EAGsDA,eAAgBL,EAHtE,EAGsEA,oBAAqBgH,EAH3F,EAG2FA,gBAH3F,EAM2CtI,KAAKZ,MAA/CwG,EAND,EAMCA,YAAa3C,EANd,EAMcA,gBAAiBlF,EAN/B,EAM+BA,QAE9BS,EAAQ5B,eAAeO,QAAQ,SAC/B6G,EAAkB9G,IAExB,OACI,sBAAK6B,UAAU,UAAf,UACM6G,GAAe,cAAC,EAAD,CAAc7H,QAASA,EAASsH,eAAgBrF,KAAKqF,iBACpEpC,GAAmB,qBAAKlE,UAAU,QAAf,SACjB,sBAAKA,UAAU,kBAAf,UACI,mBAAGA,UAAU,eAAeC,QAAS,kBAAM,EAAKoD,oBAAmB,MACnE,sBAAKrD,UAAU,YAAf,UACI,iEACA,uBAAOgC,KAAK,OAAOZ,KAAK,WAAWC,MAAOmB,EAAUP,YAAY,+BAAgBC,aAAa,OAAOC,SAAUlB,KAAKF,iBACnH,uBAAOiB,KAAK,OAAOZ,KAAK,aAAaC,MAAOoB,EAAYR,YAAY,QAAQC,aAAa,OAAOC,SAAUlB,KAAKF,iBAC/G,uBAAOiB,KAAK,OAAOZ,KAAK,YAAYC,MAAOsB,EAAWV,YAAY,qBAAgBC,aAAa,OAAOC,SAAUlB,KAAKF,iBACrH,uBAAOiB,KAAK,SAASZ,KAAK,eAAeC,MAAOqB,EAAcT,YAAY,8BAAoBC,aAAa,OAAOC,SAAUlB,KAAKF,iBACjI,qBAAKf,UAAU,qBAAf,SACK4C,IAAmB,IAAMA,EAAec,KAAI,SAACJ,GAAD,OACzC,sBAAoBtD,UAAU,gBAAgBC,QAAS,kBAAM,EAAK8C,uBAAuBO,IAAzF,UACKA,EAAS,mBAAGtD,UAAU,0BADjBsD,QAMlB,yBAAQlC,KAAK,mBAAmBuC,SAAS,qBAAqBxB,SAAUlB,KAAK6B,kBAA7E,UACI,wDACCP,GAAuBA,EAAoBmB,KAAI,SAACJ,GAAD,OAC5C,iCAAwBA,GAAXA,SAGpBtE,GAAW,qBAAKgB,UAAU,gBAAf,SAAgChB,IAC5C,wBAAQoD,UAAWI,IAAaC,IAAeC,EAAczC,QAASgB,KAAKwI,WAA3E,4BAIXM,OAAOC,KAAKzF,GAAMF,OAAS,EAAI,sBAAKrE,UAAU,iBAAf,UAC5B,qBAAKA,UAAU,aAAf,SACqB,OAAfuE,EAAKrB,MACH,qBAAKqC,IAAKhB,EAAKrB,MAAOsC,IAAKjB,EAAKnD,OAEhC,8BAAK,mBAAGpB,UAAU,sBAG1B,sBAAKA,UAAU,YAAf,UACI,6BAAKuE,EAAKnD,OACV,qBAAKpB,UAAU,cAAf,SAA8BuE,EAAKtB,SACnC,qBAAKjD,UAAU,qBAAf,SACKuE,EAAKhD,YAAcgD,EAAKhD,WAAWmC,KAAI,gBAAG4B,EAAH,EAAGA,GAAIlE,EAAP,EAAOA,KAAP,OACpC,qBAAcpB,UAAU,gBAAgBC,QAAS,kBAAMlC,OAAOC,SAASC,KAAO,mBAAqBmD,GAAnG,SAA0GA,GAAhGkE,QAGlB,sBAAKtF,UAAU,cAAf,oDAAuDuJ,KACvD,sBAAKvJ,UAAU,mBAAf,UACKiF,IAAoB1H,EAAiBG,SAClC,wBAAQuC,QAASgB,KAAKuI,eAAgBpH,SAAoB,OAAV3C,GAAkB8J,EAAkB,EAApF,yBACFtE,IAAoB1H,EAAiBC,OAASyH,IAAoB1H,EAAiBE,YACjF,wBAAQuC,UAAU,SAASC,QAAS,kBAAM,EAAKoD,oBAAmB,IAAlE,4CACF5D,GAAS,sBAAKO,UAAU,UAAf,uGAC+D,cAAC,IAAD,CAAME,GAAI,CAAEE,SAAU,WAAYC,MAAO,CAAEC,SAAUvC,OAAOC,SAASoC,WAArE,8BAD/D,QAC0K,mBAAGnC,KAAK,WAAR,sCAD1K,gBAOnB,oBAAIqJ,MAAO,CAAE,UAAa,UAA1B,sD,GAvOMjF,aCsFX4H,E,kDArFX,WAAYxJ,GAAQ,IAAD,8BACf,cAAMA,IAEDJ,MAAQ,CACT6J,OAAQ,EAAKzJ,MAAMgG,MAAMC,OAAOwD,OAChChE,KAAM,GACNY,WAAW,GANA,E,qDAYnB,WAAqB,IAAD,OAChBrF,IAAMmD,IAAI,sBAAwB3D,KAAKZ,MAAM6J,QACxCvI,MAAK,SAAA9C,GACF,EAAKqC,SAAS,CACVgF,KAAMrH,EAASE,UAGtB+C,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVlC,QAASJ,EAAoBmD,EAAMlD,eAI/C,IAAMoG,EAAkB9G,IACgB,OAApCN,eAAeO,QAAQ,UAAqB6G,IAAoB1H,EAAiBG,SACjFuD,KAAKC,SAAS,CACV4F,WAAW,M,oBAKvB,WAAU,IAAD,EAEqB7F,KAAKZ,MAAzB6F,EAFD,EAECA,KAEN,OAJK,EAEOY,UAGR,cAAC,EAAD,CAAgB9E,KAAMzE,EAAiBC,QAEvC,qBAAKwC,UAAU,UAAf,SACK+J,OAAOC,KAAK9D,GAAM7B,OAAS,EACxB,sBAAKrE,UAAU,eAAf,UACI,sBAAKA,UAAU,YAAf,UACI,8CACA,sBAAKA,UAAU,YAAf,UACI,2CACA,uBAAOqB,MAAO6E,EAAKiC,MAAOK,UAAQ,OAEtC,sBAAKxI,UAAU,YAAf,UACI,+CACA,uBAAOqB,MAAO6E,EAAKC,UAAWqC,UAAQ,OAE1C,sBAAKxI,UAAU,YAAf,UACI,8CACA,uBAAOqB,MAAO6E,EAAKE,SAAUoC,UAAQ,UAI7C,sBAAKxI,UAAU,eAAf,UACI,iDACA,sBAAKA,UAAU,YAAf,UACI,2CACA,uBAAOoB,KAAK,UAAUC,MAAO6E,EAAK0B,QAASY,UAAQ,OAEvD,sBAAKxI,UAAU,YAAf,UACI,2DACA,uBAAOoB,KAAK,OAAOC,MAAO6E,EAAK2B,KAAMW,UAAQ,OAEjD,sBAAKxI,UAAU,YAAf,UACI,kDACA,uBAAOoB,KAAK,UAAUC,MAAO6E,EAAK4B,QAASU,UAAQ,OAEvD,sBAAKxI,UAAU,YAAf,UACI,6CACA,uBAAOoB,KAAK,cAAcC,MAAO6E,EAAK6B,YAAaS,UAAQ,aAKvE,oBAAIlB,MAAO,CAAE,UAAa,UAA1B,oD,GAlFD5H,IAAM2C,WCsGV8H,E,kDArGX,WAAY1J,GAAQ,IAAD,8BACf,cAAMA,IAEDJ,MAAQ,CACT+J,MAAO,GACPtD,WAAW,EACXD,aAAa,EACbjG,kBAAcD,GAIlB,EAAK0J,eAAiB,EAAKA,eAAevJ,KAApB,gBAGtB,EAAKwF,eAAiB,EAAKA,eAAexF,KAApB,gBAdP,E,kDAiBnB,SAAeoJ,EAAQvL,GAAO,IAAD,OACzB8C,IAAMyF,IAAI,qBAAuBgD,EAAS,YAAcvL,GACvDgD,MAAK,SAAA9C,GAAa,IACTuL,EAAU,EAAK/J,MAAf+J,MACFE,EAAYF,EAAMhD,WAAW,SAAAmD,GAAG,OAAIA,EAAIjF,KAAO4E,KACnDE,EAAME,GAAazL,EAASE,KAC5B,EAAKmC,SAAS,CACVkJ,MAAOA,EACPxJ,aAAc,8DACdiG,aAAa,OAGpB/E,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVN,aAAchC,EAAoBmD,EAAMlD,iB,4BAKpD,SAAeC,GACXmC,KAAKC,SAAS,CACV2F,YAAa/H,EACb8B,kBAAcD,M,+BAItB,WAAqB,IAAD,OAChBc,IAAMmD,IAAI,oBACLjD,MAAK,SAAA9C,GACF,EAAKqC,SAAS,CACVkJ,MAAOvL,EAASE,UAGvB+C,OAAM,SAAAC,GACH,EAAKb,SAAS,CACVN,aAAchC,EAAoBmD,EAAMlD,eAIpD,IAAMoG,EAAkB9G,KACgB,OAApCN,eAAeO,QAAQ,UAAqB,CAACb,EAAiBG,QAASH,EAAiBE,WAAW+D,SAASyD,KAC5GhE,KAAKC,SAAS,CACV4F,WAAW,M,oBAKvB,WAAU,IAAD,SAEiD7F,KAAKZ,MAArD+J,EAFD,EAECA,MAAOtD,EAFR,EAEQA,UAAWD,EAFnB,EAEmBA,YAAajG,EAFhC,EAEgCA,aAErC,OAAOkG,EACH,cAAC,EAAD,CAAgB9E,KAAMzE,EAAiBC,QAEvC,sBAAKwC,UAAU,UAAf,UACM6G,GAAe,cAAC,EAAD,CAAc7H,QAAS4B,EAAc0F,eAAgBrF,KAAKqF,iBAC3E,kCACI,gCACI,+BACI,iDACA,uCACA,6CACA,qDAGR,gCACK8D,GAASA,EAAM1G,KAAI,gBAAG4B,EAAH,EAAGA,GAAIa,EAAP,EAAOA,UAAWC,EAAlB,EAAkBA,SAAU+B,EAA5B,EAA4BA,MAAOxJ,EAAnC,EAAmCA,KAAnC,OAChB,+BACI,6BACI,oBAAGV,KAAM,UAAYqH,EAArB,UAA0Ba,EAA1B,IAAsCC,OAE1C,6BAAK+B,IACL,6BAAM7I,EAAkBX,KACxB,+BACKA,IAASpB,EAAiBG,SAAW,wBAAQsC,UAAU,QAAQC,QAAS,kBAAM,EAAKoK,eAAe/E,EAAI,cAAjE,mCACrC3G,IAASpB,EAAiBE,WAAa,wBAAQuC,UAAU,MAAMC,QAAS,kBAAM,EAAKoK,eAAe/E,EAAI,YAA/D,uCARtCA,kB,GArFfjD,aC8BRmI,MAxBf,WAEE,IAAM/K,EAAQ5B,eAAeO,QAAQ,SAErC,OACE,qBAAK4B,UAAU,MAAf,SACE,eAAC,IAAD,WACE,cAAC,EAAD,CAAQP,MAAQA,IAChB,eAAC,IAAD,WACE,cAAC,IAAD,CAAOgL,OAAK,EAACC,KAAK,iBAAiBC,UAAYrB,IAC/C,cAAC,IAAD,CAAOoB,KAAM,CAAC,2BAA4B,UAAWC,UAAY/G,IACjE,cAAC,IAAD,CAAO8G,KAAK,gBAAgBC,UAAYpE,IACxC,cAAC,IAAD,CAAOmE,KAAK,WAAWC,UAAYjC,IACnC,cAAC,IAAD,CAAOgC,KAAK,WAAWC,UAAY1B,IACnC,cAAC,IAAD,CAAOyB,KAAK,WAAWC,UAAYpD,IACnC,cAAC,IAAD,CAAOmD,KAAK,iBAAiBC,UAAYV,IACzC,cAAC,IAAD,CAAOS,KAAK,SAASC,UAAYR,IACjC,cAAC,IAAD,CAAOO,KAAM,CAAC,GAAI,SAAUC,UAAYpK,aCxBlDkB,IAAMqH,SAAS8B,QAAU,wBACe,OAApC/M,eAAeO,QAAQ,WACzBqD,IAAMqH,SAASC,QAAQC,OAAvB,cAAiD,UAAYnL,eAAeO,QAAQ,UAGtFyM,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.6243257d.chunk.js","sourcesContent":["export const USER_PERMISSIONS = {\r\n    admin: \"ROLE_ADMIN\",\r\n    librarian: \"ROLE_LIBRARIAN\",\r\n    student: \"ROLE_STUDENT\"\r\n}\r\n\r\nexport const RESERVATION_STATUS = {\r\n    reserved: \"RESERVED\",\r\n    collected: \"COLLECTED\",\r\n    returned: \"RETURNED\"\r\n}","import { USER_PERMISSIONS } from \"./Constants\";\r\n\r\nexport function signOut() {\r\n    sessionStorage.clear();\r\n    window.location.href = \"/home\";\r\n}\r\n\r\nexport function redirectToSignIn() {\r\n    sessionStorage.clear();\r\n    window.location.href = \"/sign-in\"\r\n}\r\n\r\nexport function redirectHome() {\r\n    window.location.href = \"/home\"\r\n}\r\n\r\nexport function getUserPermissions() {\r\n    if(sessionStorage.getItem(\"token\") !== null) {\r\n        const token = sessionStorage.getItem(\"token\");\r\n        let jwtData = token.split('.')[1];\r\n        let decodedJwtJsonData = window.atob(jwtData);\r\n        let decodedJwtData = JSON.parse(decodedJwtJsonData);\r\n        return decodedJwtData.role;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nexport function handleErrorResponse(response) {\r\n    if(!response) {\r\n        return \"Błąd serwera!\"\r\n    } else if(response.status === 500) {\r\n        signOut()\r\n    } else {\r\n        return response.data.message\r\n    }\r\n}\r\n\r\nexport function sortAlphabetically(set) {\r\n    return set.sort(function (a, b) {\r\n        if (a < b) { return -1; }\r\n        if (a > b) { return 1; }\r\n        return 0;\r\n    })\r\n}\r\n\r\nexport function transformUserRole(userRole) {\r\n    switch(userRole) {\r\n        case USER_PERMISSIONS.student:\r\n            return \"Student\"\r\n        case USER_PERMISSIONS.librarian:\r\n            return \"Bibliotekarz\"\r\n        default:\r\n            return \"Student\"\r\n    }\r\n}\r\n\r\nexport function transformLongText(text) {\r\n    if(text.length > 50) {\r\n        return text.substring(0, 50) + \"...\"\r\n    } else {\r\n        return text\r\n    }\r\n}","import React from 'react';\r\nimport './Navbar.css';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport { getUserPermissions, signOut } from '../../HelperMethods';\r\nimport { USER_PERMISSIONS } from '../../Constants';\r\n\r\n\r\nconst Navbar = ({ token }) => {\r\n\r\n    const [isMenuOpen, setIsMenuOpen] = React.useState(false);\r\n    const [isProfileOptionsOpen, setProfileOptionsOpen] = React.useState(false);\r\n\r\n    return (\r\n        <nav>\r\n            <div className=\"logo\">\r\n                <h4>eBiblioteka</h4>\r\n            </div>\r\n            <div className=\"burger\" onClick={() => setIsMenuOpen(!isMenuOpen) }>\r\n                <div className=\"line1\"></div>\r\n                <div className=\"line2\"></div>\r\n                <div className=\"line3\"></div>\r\n            </div>\r\n            <ul className={isMenuOpen ? \"nav-active\" : \"\"}>\r\n                <li>\r\n                    <NavLink to=\"/home\" activeClassName=\"active\" onClick={() => setIsMenuOpen(false)}>Strona główna</NavLink>\r\n                </li>\r\n                <li>\r\n                    <NavLink to=\"/books\" activeClassName=\"active\" onClick={() => setIsMenuOpen(false)}>Książki</NavLink>\r\n                </li>\r\n                { token && <li>\r\n                    <NavLink to=\"/reservations\" activeClassName=\"active\" onClick={() => setIsMenuOpen(false)}>Rezerwacje</NavLink>\r\n                </li>}\r\n                { token && getUserPermissions(token) === USER_PERMISSIONS.admin && <li>\r\n                    <NavLink to=\"/users\" activeClassName=\"active\" onClick={() => setIsMenuOpen(false)}>Użytkownicy</NavLink>\r\n                </li>}\r\n                { token && <li className=\"profile-link\" onClick={() => setProfileOptionsOpen(!isProfileOptionsOpen)}>\r\n                    Profil <i className=\"fas fa-angle-down\"></i>\r\n                </li>}\r\n                { isProfileOptionsOpen && <li className=\"profile-item\">\r\n                    <Link to=\"/profile\" onClick={() => setIsMenuOpen(false)}>Mój profil</Link>\r\n                </li> }\r\n                { isProfileOptionsOpen && <li className=\"profile-item\">\r\n                    <Link to=\"/home\" onClick={() => {setIsMenuOpen(false); signOut()}}>Wyloguj się</Link>\r\n                </li>}\r\n                { !token && <li className=\"sign-in-link\">\r\n                    <Link to={{pathname:\"/sign-in\", state: {prevPath: window.location.pathname }}} onClick={() => setIsMenuOpen(false)}>Zaloguj się</Link>\r\n                </li>}\r\n                { !token && <li className=\"sign-up-link\">\r\n                    <Link to=\"/sign-up\" onClick={() => setIsMenuOpen(false)}>Załóż konto</Link>\r\n                </li>}\r\n            </ul>\r\n            { token ?\r\n                <div className=\"profile\" onClick={() => setProfileOptionsOpen(!isProfileOptionsOpen) }>\r\n                    Profil <i className=\"fas fa-angle-down\"></i>\r\n                    <div className={ isProfileOptionsOpen ? \"profile-options profile-options-active\" : \"profile-options\"}>\r\n                        <ul>\r\n                            <li>\r\n                                <Link to=\"/profile\" onClick={() => setIsMenuOpen(false)}>Mój profil</Link>\r\n                            </li>\r\n                            <li onClick={() => signOut()}>Wyloguj się</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                :\r\n                <div className=\"sign-container\">\r\n                    <div className=\"sign-in\">\r\n                        <Link to={{pathname:\"/sign-in\", state: {prevPath: window.location.pathname}}} onClick={() => setIsMenuOpen(false)}>Zaloguj się</Link>\r\n                    </div>\r\n                    <div className=\"sign-up\">\r\n                        <Link to=\"/sign-up\" onClick={() => setIsMenuOpen(false)}>Załóż konto</Link>\r\n                    </div>\r\n                </div>}\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Navbar;","import React from 'react';\r\nimport './Home.css';\r\n\r\nconst Home = () => {\r\n    return (\r\n        <div className=\"content\">\r\n            <h2>Internetowa wypożyczalnia książek</h2>\r\n            <div className=\"description\">\r\n                <p>Aplikacja umożliwia reserwację, wypożyczenie oraz zwrot książek.\r\n                Ilość egzemplarzy danej książki jest ograniczona.\r\n                Aby ułatwić proces wyszukiwania książki utworzono filtry określające gatunek\r\n                książki oraz przedmioty, których może ona dotyczyć.\r\n                    </p>\r\n                <p>Proces wypożyczania książki odbywa się na następujących zasadach:</p>\r\n                <ul>\r\n                    <li>\r\n                        Aby zarezerwować książkę niezbędne jest posiadanie konta na tej stronie. Można je założyć naciskając <b>Załóż konto</b>.\r\n                        </li>\r\n                    <li>\r\n                        Użytkownik znajduje interesującą go książkę, jeśli jest ona dostępna, naciska <b>Zarezerwuj</b>.\r\n                        </li>\r\n                    <li>\r\n                        Użytkownik ma 2 dni na odbiór<b>*</b> książki.\r\n                        </li>\r\n                    <li>\r\n                        Jeśli wszystkie egzemplarze danej książki są wypożyczone, widoczna będzie przewidywana data zwrotu książki przez innego użytkownika.\r\n                        </li>\r\n                    <li>\r\n                        Po odbiorze książki, użytkownik powinien ją zwrócić<b>*</b> do 30 dni od dnia odbioru.\r\n                        </li>\r\n                    <li>\r\n                        <b>*</b> Odbiór oraz zwrot książki odbywa się na stronie internetowej, w sekcji <b>Wypożyczenia</b>.\r\n                        </li>\r\n                </ul>\r\n            </div>\r\n        </div>)\r\n}\r\n\r\nexport default Home;","import { Component } from \"react\";\r\nimport axios from 'axios';\r\nimport { handleErrorResponse } from '../../HelperMethods';\r\n\r\nclass NewCategoryModal extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            categoryName: undefined,\r\n            errorMessage: undefined\r\n        }\r\n\r\n        this.addCategory = this.addCategory.bind(this);\r\n        this.handleOnChange = this.handleOnChange.bind(this);\r\n    }\r\n\r\n    handleOnChange(element) {\r\n        this.setState({\r\n            [element.target.name]: element.target.value,\r\n            errorMessage: undefined\r\n        })\r\n    }\r\n\r\n    addCategory() {\r\n        const newCategory = { \r\n            name: this.state.categoryName \r\n        }\r\n\r\n        if (!this.props.categories.includes(this.state.categoryName)) {\r\n            axios.post(\"/api/library/categories\", newCategory)\r\n                .then(() => {\r\n\r\n                    this.props.updateCategories(this.state.categoryName)\r\n\r\n                    this.setState({\r\n                        categoryName: undefined\r\n                    })\r\n\r\n                    this.props.setCategoryModalStatus(false)\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        errorMessage: handleErrorResponse(error.response)\r\n                    })\r\n                });\r\n        } else {\r\n            this.setState({\r\n                errorMessage: \"Ta kategoria już istnieje.\"\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let { categoryName, errorMessage } = this.state;\r\n\r\n        return (\r\n            <div className=\"modal\">\r\n                <div className=\"modal-container\">\r\n                    <i className=\" fas fa-times\" onClick={() => this.props.setCategoryModalStatus(false)}></i>\r\n                    <div className=\"sign-form\">\r\n                        <h2>Dodanie nowej kategorii</h2>\r\n                        <input type=\"text\" name=\"categoryName\" placeholder=\"NAZWA KATEGORII\" autoComplete=\"off\" onChange={this.handleOnChange} />\r\n                        {errorMessage && <div className=\"error-message\">{errorMessage}</div>}\r\n                        <button disabled={!categoryName} onClick={this.addCategory}>Dodaj</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default NewCategoryModal;","import { Component } from \"react\";\r\nimport { handleErrorResponse } from '../../HelperMethods';\r\nimport axios from 'axios';\r\n\r\nclass NewBookModal extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            displayedCategories: this.props.categories,\r\n            bookName: undefined,\r\n            bookAuthor: undefined,\r\n            bookQuantity: undefined,\r\n            bookImage: undefined,\r\n            bookCategories: [],\r\n            errorMessage: undefined\r\n        }\r\n\r\n        this.addBook = this.addBook.bind(this);\r\n        this.handleOnChange = this.handleOnChange.bind(this);\r\n        this.addCategoryToBook = this.addCategoryToBook.bind(this);\r\n        this.deleteCategoryFromBook = this.deleteCategoryFromBook.bind(this);\r\n    }\r\n\r\n    handleOnChange(element) {\r\n        this.setState({\r\n            [element.target.name]: element.target.value,\r\n            errorMessage: undefined\r\n        })\r\n    }\r\n\r\n    addBook() {\r\n        const newBook = {\r\n            name: this.state.bookName,\r\n            author: this.state.bookAuthor,\r\n            image: this.state.bookImage,\r\n            quantity: this.state.bookQuantity,\r\n            categories: this.state.bookCategories\r\n        }\r\n\r\n        axios.post(\"/api/library/books\", newBook)\r\n            .then(response => {\r\n                this.props.updateBooks(response.data)\r\n\r\n                this.setState({\r\n                    bookName: undefined,\r\n                    bookAuthor: undefined,\r\n                    bookImage: undefined,\r\n                    bookQuantity: undefined,\r\n                    bookCategories: [],\r\n                    displayedCategories: []\r\n                })\r\n\r\n                this.props.setBookModalStatus(false)\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    errorMessage: handleErrorResponse(error.response)\r\n                })\r\n            });\r\n    }\r\n\r\n    addCategoryToBook(element) {\r\n        const category = element.target.value;\r\n        let { bookCategories, displayedCategories } = this.state;\r\n        bookCategories.push(category);\r\n        displayedCategories.splice(displayedCategories.indexOf(category), 1);\r\n\r\n        this.setState({\r\n            bookCategories: bookCategories,\r\n            displayedCategories: displayedCategories\r\n        })\r\n    }\r\n\r\n    deleteCategoryFromBook(category) {\r\n        let { bookCategories, displayedCategories } = this.state;\r\n        bookCategories.splice(bookCategories.indexOf(category), 1);\r\n        displayedCategories.push(category);\r\n\r\n        this.setState({\r\n            bookCategories: bookCategories,\r\n            displayedCategories: displayedCategories\r\n        })\r\n    }\r\n\r\n    render() {\r\n\r\n        let { bookName, bookAuthor, bookQuantity, bookCategories, displayedCategories, errorMessage } = this.state;\r\n\r\n        return (\r\n            <div className=\"modal\">\r\n                <div className=\"modal-container\">\r\n                    <i className=\"fas fa-times\" onClick={() => this.props.setBookModalStatus(false)}></i>\r\n                    <div className=\"sign-form\">\r\n                        <h2>Dodanie nowej książki</h2>\r\n                        <input type=\"text\" name=\"bookName\" placeholder=\"TYTUŁ KSIĄŻKI\" autoComplete=\"off1\" onChange={this.handleOnChange} />\r\n                        <input type=\"text\" name=\"bookAuthor\" placeholder=\"AUTOR\" autoComplete=\"off2\" onChange={this.handleOnChange} />\r\n                        <input type=\"text\" name=\"bookImage\" placeholder=\"OKŁADKA (URL)\" autoComplete=\"off3\" onChange={this.handleOnChange} />\r\n                        <input type=\"number\" name=\"bookQuantity\" placeholder=\"ILOŚĆ EGZEMPLARZY\" autoComplete=\"off4\" onChange={this.handleOnChange} />\r\n                        <div className=\"category-container\">\r\n                            {bookCategories !== [] && bookCategories.map((category) => (\r\n                                <div key={category} className=\"book-category\" onClick={() => this.deleteCategoryFromBook(category)}>\r\n                                    {category}<i className=\"fas fa-times-circle\"></i>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n    \r\n                        <select name=\"selectedCategory\" selected=\"Wybierz kategorie:\" onChange={this.addCategoryToBook}>\r\n                            <option>Wybierz kategorie:</option>\r\n                            {displayedCategories && displayedCategories.map((category) => (\r\n                                <option key={category}>{category}</option>\r\n                            ))}\r\n                        </select>\r\n                        {errorMessage && <div className=\"error-message\">{errorMessage}</div>}\r\n                        <button disabled={!bookName || !bookAuthor || !bookQuantity} onClick={this.addBook}>Dodaj</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default NewBookModal;","import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport './Books.css';\r\nimport { getUserPermissions, handleErrorResponse, sortAlphabetically, transformLongText } from '../../HelperMethods';\r\nimport { USER_PERMISSIONS } from '../../Constants';\r\nimport NewCategoryModal from '../Modals/NewCategoryModal';\r\nimport NewBookModal from '../Modals/NewBookModal';\r\n\r\nclass Books extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            books: [],\r\n            displayedBooks: [],\r\n            selectedCategory: undefined,\r\n            categories: [],\r\n            chosenCategories: [],\r\n            isCategoryModalOpen: false,\r\n            isBookModalOpen: false,\r\n            errorMessage: undefined\r\n        }\r\n\r\n        this.updateBooks = this.updateBooks.bind(this);\r\n        this.updateCategories = this.updateCategories.bind(this);\r\n\r\n        this.setCategoryModalStatus = this.setCategoryModalStatus.bind(this);\r\n        this.setBookModalStatus = this.setBookModalStatus.bind(this);\r\n    }\r\n\r\n    handleFilter(category) {\r\n        let categoryFilter = this.state.chosenCategories;\r\n        categoryFilter.includes(category) ? categoryFilter.pop(category) : categoryFilter.push(category);\r\n        if (categoryFilter.length > 0) {\r\n            this.setState({\r\n                chosenCategories: categoryFilter,\r\n                displayedBooks: this.state.books.filter((book) => {\r\n                    return book.categories.find(({ name }) => categoryFilter.includes(name))\r\n                })\r\n            })\r\n        } else {\r\n            this.setState({\r\n                displayedBooks: this.state.books\r\n            })\r\n        }\r\n    }\r\n\r\n    clearFilter() {\r\n        this.setState({\r\n            chosenCategories: [],\r\n            displayedBooks: this.state.books\r\n        })\r\n    }\r\n\r\n    setCategoryModalStatus(status) {\r\n        this.setState({\r\n            isCategoryModalOpen: status\r\n        })\r\n    }\r\n\r\n    setBookModalStatus(status) {\r\n        this.setState({\r\n            isBookModalOpen: status\r\n        })\r\n    }\r\n\r\n    updateBooks(newBook) {\r\n        let updatedBooks = this.state.books;\r\n        updatedBooks.push(newBook);\r\n\r\n        this.setState({\r\n            books: updatedBooks\r\n        })\r\n    }\r\n\r\n    updateCategories(newCategory) {\r\n        let updatedCategories = this.state.categories;\r\n        updatedCategories.push(newCategory);\r\n\r\n        this.setState({\r\n            categories: sortAlphabetically(updatedCategories).slice(),\r\n            displayedCategories: sortAlphabetically(updatedCategories).slice(),\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(\"/api/books\")\r\n            .then(response => {\r\n                this.setState({\r\n                    books: response.data,\r\n                    displayedBooks: response.data\r\n                })\r\n\r\n                const params = new URLSearchParams(this.props.location.search);\r\n                const category = params.get('category');\r\n                if (category != null) this.handleFilter(category)\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    errorMessage: handleErrorResponse(error.response)\r\n                })\r\n            });\r\n\r\n        axios.get(\"/api/categories\")\r\n            .then(response => {\r\n                let categorySet = response.data.map(({ name }) => name)\r\n\r\n                this.setState({\r\n                    categories: sortAlphabetically(categorySet).slice(),\r\n                    displayedCategories: sortAlphabetically(categorySet).slice()\r\n                })\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    errorMessage: handleErrorResponse(error.response)\r\n                })\r\n            });\r\n    }\r\n\r\n    render() {\r\n\r\n        let { displayedBooks, categories, chosenCategories, isCategoryModalOpen, isBookModalOpen } = this.state;\r\n\r\n        const userPermissions = getUserPermissions();\r\n\r\n        return (\r\n            <div className=\"content\">\r\n                { isCategoryModalOpen && <NewCategoryModal \r\n                                            categories={ categories }\r\n                                            setCategoryModalStatus={ this.setCategoryModalStatus }\r\n                                            updateCategories={ this.updateCategories } /> }\r\n                { isBookModalOpen && <NewBookModal\r\n                                            categories={ categories }\r\n                                            setBookModalStatus={ this.setBookModalStatus }\r\n                                            updateBooks={ this.updateBooks } />}\r\n                <div className=\"filter\">\r\n                    <span>Kategorie:</span>\r\n                    <div className=\"filter-container\">\r\n                        {categories && categories.map((category) => (\r\n                            <div className=\"filter-item\" key={category}>\r\n                                <input type=\"checkbox\" name={category} onChange={() => this.handleFilter(category)} checked={chosenCategories.includes(category)} />\r\n                                <label htmlFor={category}>{category}</label>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                    <div className=\"button-group\">\r\n                        { (userPermissions === USER_PERMISSIONS.admin || userPermissions === USER_PERMISSIONS.librarian) &&\r\n                            <button className=\"green\" onClick={ () => this.setCategoryModalStatus(!isCategoryModalOpen) }>Dodaj kategorię</button> }\r\n                        <button onClick={() => this.clearFilter()}>Wyczyść</button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"card-container\">\r\n                    {(userPermissions === USER_PERMISSIONS.admin || userPermissions === USER_PERMISSIONS.librarian) &&\r\n                        <div className=\"card add-book\" onClick={() => this.setBookModalStatus(true)}>\r\n                            <i className=\"far fa-plus-square\"></i>\r\n                            <div className=\"card-info\">\r\n                                <h3>Dodaj książkę</h3>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {displayedBooks && displayedBooks.map(({ id, name, author, image }) => (\r\n                        <a key={ id } href={ \"/books/\" + id }>\r\n                            <div className={ image === null ? \"no-image card\" : \"card\" } >\r\n                                { image !== null ? <img key={ image } src={image} alt={ name } /> : <i className=\"fas fa-camera\"></i>}\r\n                                <div className=\"card-info\">\r\n                                    <h3>{ transformLongText(name) }</h3>\r\n                                    <div>{ author }</div>\r\n                                </div>\r\n                            </div>\r\n                        </a>\r\n                    ))}\r\n                </div>\r\n                { displayedBooks.length === 0 && <div className=\"no-content\">Nie znaleziono żadnych książek.</div>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Books;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { USER_PERMISSIONS } from '../../Constants';\r\n\r\nconst ModalForbidden = ({ type }) => {\r\n\r\n    return (\r\n        <div className=\"modal\">\r\n            <div className=\"modal-container\">\r\n                <h2>BŁĄD 403</h2>\r\n                { type && type === USER_PERMISSIONS.admin ?\r\n                    <div>Dostęp do tej strony jest zarezerwowany dla użytkowników o wyższych uprawnieniach.</div>\r\n                    :\r\n                    <div>Dostęp do tej strony mają tylko użytkownicy zalogowani.</div>}\r\n                { type && type === USER_PERMISSIONS.admin ? \r\n                    <button><Link to={{ pathname: \"/home\", state: { prevPath: window.location.pathname } }} >Strona główna</Link></button>\r\n                    :\r\n                    <button><Link to={{ pathname: \"/sign-in\", state: { prevPath: window.location.pathname } }} >Zaloguj się</Link></button>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ModalForbidden;","import { RESERVATION_STATUS } from '../../Constants';\r\n\r\nconst UserTable = ({displayedReservations, changeBookStatus }) => {\r\n\r\n    return (\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>Książka</th>\r\n                    <th>Data rezerwacji</th>\r\n                    <th>Status</th>\r\n                    <th>Działania</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {displayedReservations && displayedReservations.map(({ id, book, date, status }) => (\r\n                    <tr key={id}>\r\n                        <td>\r\n                            <a href={\"/books/\" + book.id}>{book.name}</a>\r\n                        </td>\r\n                        <td>{new Date(date).toLocaleString()}</td>\r\n                        <td>\r\n                            {status === RESERVATION_STATUS.reserved && \"Gotowa do obioru\"}\r\n                            {status === RESERVATION_STATUS.collected && \"Wypożyczona\"}\r\n                            {status === RESERVATION_STATUS.returned && \"Zwrócona\"}\r\n                        </td>\r\n                        <td>\r\n                            {status === RESERVATION_STATUS.reserved &&\r\n                                <button onClick={() => changeBookStatus(id, RESERVATION_STATUS.collected)}>ODBIERZ</button>}\r\n                            {status === RESERVATION_STATUS.collected &&\r\n                                <button onClick={() => changeBookStatus(id, RESERVATION_STATUS.returned)}>ZWRÓĆ</button>}\r\n                        </td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n\r\nexport default UserTable;","import { RESERVATION_STATUS } from '../../Constants';\r\n\r\nconst AdminTable = ({ displayedReservations }) => {\r\n\r\n    return(\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>Użytkownik</th>\r\n                    <th>Książka</th>\r\n                    <th>Data rezerwacji</th>\r\n                    <th>Status</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {displayedReservations && displayedReservations.map(({ id, book, date, status, user }) => (\r\n                    <tr key={id}>\r\n                        <td key={user.id}>\r\n                            <a href={\"/users/\" + user.id}>{ user.firstName } { user.lastName }</a>\r\n                        </td>\r\n                        <td>\r\n                            <a href={\"/books/\" + book.id}>{book.name}</a>\r\n                        </td>\r\n                        <td>{new Date(date).toLocaleString()}</td>\r\n                        <td>\r\n                            {status === RESERVATION_STATUS.reserved && \"Gotowa do obioru\"}\r\n                            {status === RESERVATION_STATUS.collected && \"Wypożyczona\"}\r\n                            {status === RESERVATION_STATUS.returned && \"Zwrócona\"}\r\n                        </td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n\r\nexport default AdminTable;","const MessageModal = ({ message, setModalStatus }) => {\r\n\r\n    return (\r\n        <div className=\"modal\">\r\n            <div className=\"modal-container\">\r\n                <i className=\" fas fa-times\" onClick={() => setModalStatus(false)}></i>\r\n                <div>{message}</div>\r\n            </div>\r\n        </div>)\r\n}\r\n\r\nexport default MessageModal;","import React from 'react';\r\nimport './Reservations.css';\r\nimport axios from 'axios';\r\nimport { getUserPermissions, handleErrorResponse } from '../../HelperMethods';\r\nimport { RESERVATION_STATUS, USER_PERMISSIONS } from '../../Constants';\r\nimport ModalForbidden from '../Modals/ModalForbidden';\r\nimport UserTable from './UserTable';\r\nimport AdminTable from './AdminTable';\r\nimport MessageModal from '../Modals/MessageModal';\r\n\r\nclass Reservations extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            bookId: this.props.match.params.bookId,\r\n            reservations: [],\r\n            displayedReservations: [],\r\n            statusSet: [],\r\n            isModalOpen: false,\r\n            message: undefined,\r\n            forbidden: false\r\n        }\r\n\r\n        // API call functions\r\n        this.changeBookStatus = this.changeBookStatus.bind(this);\r\n\r\n        // Handlers\r\n        this.setModalStatus = this.setModalStatus.bind(this);\r\n    }\r\n\r\n    handleFilter(status) {\r\n        let statusFilter = this.state.statusSet;\r\n        statusFilter.includes(status) ? statusFilter.pop(status) : statusFilter.push(status);\r\n        \r\n        // Filter reservations by selected filters\r\n        if (statusFilter.length > 0) {\r\n            this.setState({\r\n                statusSet: statusFilter,\r\n                displayedReservations: this.state.reservations.filter((reservation) => {\r\n                    return statusFilter.includes(reservation.status)\r\n                })\r\n            })\r\n        } \r\n        // Show all resrvations if no filters\r\n        else {\r\n            this.setState({\r\n                displayedReservations: this.state.reservations\r\n            })\r\n        }\r\n    }\r\n\r\n    clearFilter() {\r\n        this.setState({\r\n            statusSet: [],\r\n            displayedReservations: this.state.reservations\r\n        })\r\n    }\r\n\r\n    setModalStatus(status) {\r\n        this.setState({\r\n            isModalOpen: status\r\n        })\r\n    }\r\n\r\n    changeBookStatus(reservationId, status) {\r\n        axios.put(\"/api/reservations/\" + reservationId + \"?newStatus=\" + status)\r\n            .then(response => {\r\n                // Save updated reservation\r\n                const updatedReservation = response.data;\r\n\r\n                // Update reservation set\r\n                let { reservations } = this.state;\r\n                reservations[reservations.findIndex(x => x.id === updatedReservation.id)] = updatedReservation;\r\n\r\n                let message = \"\";\r\n                if (status === RESERVATION_STATUS.collected) {\r\n                    message = \"Pomyślnie odebrano książkę! Pamiętaj, aby zwrócić ją do 30 dni.\";\r\n                } else {\r\n                    message = \"Dziękujemy za zwrot książki.\";\r\n                }\r\n\r\n                this.setState({\r\n                    reservations: reservations.slice(),\r\n                    displayedReservations: reservations.slice(),\r\n                    isModalOpen: true,\r\n                    message: message\r\n                })\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    isModalOpen: true,\r\n                    message: handleErrorResponse(error.response)\r\n                })\r\n            });\r\n    }\r\n\r\n    componentDidMount() {\r\n        const userPermissions = getUserPermissions();\r\n        if (userPermissions === USER_PERMISSIONS.admin || userPermissions === USER_PERMISSIONS.librarian) {\r\n            axios.get(\"/api/library/reservations\")\r\n                .then(response => {\r\n                    const data = response.data;\r\n                    this.setState({\r\n                        reservations: data.slice(),\r\n                        displayedReservations: data.slice()\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        isModalOpen: true,\r\n                        message: handleErrorResponse(error.response)\r\n                    })\r\n                });\r\n        } else {\r\n            axios.get(\"/api/reservations\")\r\n                .then(response => {\r\n                    const data = response.data;\r\n                    this.setState({\r\n                        reservations: data.slice(),\r\n                        displayedReservations: data.slice()\r\n                    })\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        isModalOpen: true,\r\n                        message: handleErrorResponse(error.response)\r\n                    })\r\n                });\r\n        }\r\n\r\n        if (sessionStorage.getItem(\"token\") === null) {\r\n            this.setState({\r\n                forbidden: true\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let { displayedReservations, statusSet, isModalOpen, message, forbidden } = this.state;\r\n\r\n        const userPermissions = getUserPermissions();\r\n\r\n        return forbidden ?\r\n            <ModalForbidden />\r\n            :\r\n            (<div className=\"content\">\r\n                {isModalOpen && <MessageModal message={ message } setModalStatus={this.setModalStatus} /> }\r\n                <div className=\"filter\">\r\n                    <span>Status:</span>\r\n                    <div className=\"filter-container\">\r\n                        <div className=\"filter-item\">\r\n                            <input type=\"checkbox\" name=\"RESERVED\"\r\n                                onChange={() => this.handleFilter(RESERVATION_STATUS.reserved)}\r\n                                checked={statusSet.includes(RESERVATION_STATUS.reserved)} />\r\n                            <label htmlFor=\"RESERVED\">Gotowe do odbioru</label>\r\n                        </div>\r\n                        <div className=\"filter-item\">\r\n                            <input type=\"checkbox\" name=\"COLLECTED\"\r\n                                onChange={() => this.handleFilter(RESERVATION_STATUS.collected)}\r\n                                checked={statusSet.includes(RESERVATION_STATUS.collected)} />\r\n                            <label htmlFor=\"COLLECTED\">Wypożyczone</label>\r\n                        </div>\r\n                        <div className=\"filter-item\">\r\n                            <input type=\"checkbox\" name=\"RETURNED\"\r\n                                onChange={() => this.handleFilter(RESERVATION_STATUS.returned)}\r\n                                checked={statusSet.includes(RESERVATION_STATUS.returned)} />\r\n                            <label htmlFor=\"RETURNED\">Zwrócone</label>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"button-group\" style={{ \"marginTop\": \"10px\" }}>\r\n                        <button onClick={() => this.clearFilter()}>Wyczyść</button>\r\n                    </div>\r\n                </div>\r\n                { displayedReservations.length > 0 ?\r\n                    <div>\r\n                        { userPermissions === USER_PERMISSIONS.student ?\r\n                            <UserTable\r\n                                displayedReservations={displayedReservations}\r\n                                changeBookStatus={this.changeBookStatus} />\r\n                            :\r\n                            <AdminTable\r\n                                displayedReservations={displayedReservations} />\r\n                        }\r\n                    </div>\r\n                    :\r\n                    <div className=\"no-content\">Nie znaleziono żadnych rezerwacji...</div>}\r\n            </div>\r\n            )\r\n    }\r\n}\r\n\r\nexport default Reservations;","import axios from 'axios';\r\nimport React from 'react';\r\nimport { handleErrorResponse } from '../../HelperMethods';\r\nimport MessageModal from '../Modals/MessageModal';\r\nimport ModalForbidden from '../Modals/ModalForbidden';\r\nimport './Profile.css';\r\n\r\nclass Profile extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            userInfo: {},\r\n            userContact: {},\r\n            newPassword: undefined,\r\n            repassword: undefined,\r\n            address: undefined,\r\n            city: undefined,\r\n            zipCode: undefined,\r\n            phoneNumber: undefined,\r\n            isModalOpen: false,\r\n            isPasswordModalOpen: false,\r\n            message: undefined,\r\n            forbidden: false\r\n        }\r\n\r\n        // API call functions\r\n        this.saveUserContact = this.saveUserContact.bind(this);\r\n        this.updateUserPassword = this.updateUserPassword.bind(this);\r\n\r\n        // Handlers\r\n        this.handleOnChange = this.handleOnChange.bind(this);\r\n        this.setModalStatus = this.setModalStatus.bind(this);\r\n    }\r\n\r\n    handleOnChange(element) {\r\n        this.setState({\r\n            [element.target.name]: element.target.value\r\n        })\r\n    }\r\n\r\n    setModalStatus(status) {\r\n        this.setState({\r\n            isModalOpen: status,\r\n            message: undefined\r\n        })\r\n    }\r\n\r\n    setPasswordModalStatus(status) {\r\n        this.setState({\r\n            isPasswordModalOpen: status\r\n        })\r\n    }\r\n\r\n    updateUserPassword() {\r\n        if (this.state.newPassword === this.state.repassword) {\r\n            if (this.state.newPassword.length > 7) {\r\n                const data = {\r\n                    email: this.state.userInfo.email,\r\n                    firstName: this.state.userInfo.firstName,\r\n                    lastName: this.state.userInfo.lastName,\r\n                    password: this.state.newPassword\r\n                }\r\n\r\n                axios.put(\"/api/users/profile\", data)\r\n                    .then(() => {\r\n                        this.setState({\r\n                            message: \"Hasło zostało pomyślnie zaktualizowane!\",\r\n                            isPasswordModalOpen: false,\r\n                            isModalOpen: true\r\n                        })\r\n                    })\r\n                    .catch(error => {\r\n                        this.setState({\r\n                            message: handleErrorResponse(error.response)\r\n                        })\r\n                    });\r\n            } else {\r\n                this.setState({\r\n                    message: \"Hasło jest za krótkie!\"\r\n                })\r\n            }\r\n        } else {\r\n            this.setState({\r\n                message: \"Hasła się różnią!\"\r\n            })\r\n        }\r\n    }\r\n\r\n    saveUserContact() {\r\n        const data = {\r\n            address: this.state.address,\r\n            city: this.state.city,\r\n            zipCode: this.state.zipCode,\r\n            phoneNumber: this.state.phoneNumber\r\n        }\r\n\r\n        axios.put(\"/api/users/contact\", data)\r\n            .then(() => {\r\n                this.setState({\r\n                    message: \"Dane kontaktowy zostały pomyślnie zaktualizowane!\",\r\n                    isModalOpen: true\r\n                })\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    message: handleErrorResponse(error.response)\r\n                })\r\n            });\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(\"/api/users/profile\")\r\n            .then(response => {\r\n                this.setState({\r\n                    userInfo: response.data\r\n                })\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    message: handleErrorResponse(error.response)\r\n                })\r\n            });\r\n\r\n        axios.get(\"/api/users/contact\")\r\n            .then(response => {\r\n                const userContact = response.data;\r\n                this.setState({\r\n                    address: userContact.address,\r\n                    city: userContact.city,\r\n                    zipCode: userContact.zipCode,\r\n                    phoneNumber: userContact.phoneNumber\r\n                })\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    message: handleErrorResponse(error.response)\r\n                })\r\n            });\r\n\r\n        if (sessionStorage.getItem(\"token\") === null) {\r\n            this.setState({\r\n                forbidden: true\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let { userInfo, newPassword, repassword, address, city, zipCode, phoneNumber } = this.state;\r\n\r\n        let { isModalOpen, isPasswordModalOpen, message, forbidden } = this.state;\r\n\r\n        return forbidden ?\r\n            <ModalForbidden />\r\n            :\r\n            (<div className=\"content\">\r\n                { isModalOpen && <MessageModal message={ message } setModalStatus={ this.setModalStatus } /> }\r\n                { isPasswordModalOpen && <div className=\"modal\">\r\n                    <div className=\"modal-container\">\r\n                        <i className=\"fas fa-times\" onClick={() => this.setPasswordModalStatus(false)}></i>\r\n                        <div className=\"sign-form\">\r\n                            <h2>Zmiana hasła</h2>\r\n                            <input type=\"password\" name=\"newPassword\" placeholder=\"HASŁO\" minLength=\"8\" maxLength=\"16\" onChange={this.handleOnChange}></input>\r\n                            <input type=\"password\" name=\"repassword\" placeholder=\"POWTÓRZ HASŁO\" minLength=\"8\" maxLength=\"16\" onChange={this.handleOnChange}></input>\r\n\r\n                            {message && <div className=\"error-message\">{message}</div>}\r\n                            <button disabled={!newPassword || !repassword} onClick={this.updateUserPassword}>Zapisz</button>\r\n                        </div>\r\n                    </div>\r\n                </div>}\r\n                <div className=\"user-profile\">\r\n                    <div className=\"user-info\">\r\n                        <h2>Dane osobowe</h2>\r\n                        <div className=\"user-item\">\r\n                            <label>Email:</label>\r\n                            <input value={userInfo.email} readOnly />\r\n                        </div>\r\n                        <div className=\"user-item\">\r\n                            <label>Imię:</label>\r\n                            <input value={userInfo.firstName} readOnly />\r\n                        </div>\r\n                        <div className=\"user-item\">\r\n                            <label>Nazwisko:</label>\r\n                            <input value={userInfo.lastName} readOnly />\r\n                        </div>\r\n                        <div className=\"button-container\">\r\n                            <button onClick={() => this.setPasswordModalStatus(true)}>Zmień hasło</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"user-contact\">\r\n                        <h2>Dane kontaktowe</h2>\r\n                        <div className=\"user-item\">\r\n                            <label>Adres:</label>\r\n                            <input type=\"text\" name=\"address\" value={address} autoComplete=\"off1\" onChange={this.handleOnChange} />\r\n                        </div>\r\n                        <div className=\"user-item\">\r\n                            <label>Miejscowość:</label>\r\n                            <input type=\"text\" name=\"city\" value={city} autoComplete=\"off2\" onChange={this.handleOnChange} />\r\n                        </div>\r\n                        <div className=\"user-item\">\r\n                            <label>Kod pocztowy:</label>\r\n                            <input type=\"text\" name=\"zipCode\" value={zipCode} pattern=\"\\d*\" maxLength=\"5\" autoComplete=\"off3\" onChange={this.handleOnChange} />\r\n                        </div>\r\n                        <div className=\"user-item\">\r\n                            <label>Telefon:</label>\r\n                            <input type=\"text\" name=\"phoneNumber\" value={phoneNumber} pattern=\"\\d*\" maxLength=\"9\" autoComplete=\"off4\" onChange={this.handleOnChange} />\r\n                        </div>\r\n                        <div className=\"button-container\">\r\n                            <button onClick={this.saveUserContact}>Zapisz</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            )\r\n    }\r\n}\r\n\r\nexport default Profile;","import React from 'react';\r\nimport './SignForms.css';\r\nimport axios from 'axios';\r\nimport { handleErrorResponse, redirectHome } from '../../HelperMethods';\r\n\r\nclass SignIn extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            email: undefined,\r\n            password: undefined,\r\n            errorMessage: undefined\r\n        }\r\n\r\n        this.handleOnChange = this.handleOnChange.bind(this);\r\n        this.signIn = this.signIn.bind(this);\r\n    }\r\n\r\n    handleOnChange(element) {\r\n        this.setState({\r\n            [element.target.name]: element.target.value\r\n        })\r\n    }\r\n\r\n    signIn() {\r\n        if (this.state.email && this.state.password) {\r\n\r\n            const credentials = {\r\n                email: this.state.email,\r\n                password: this.state.password\r\n            }\r\n\r\n            axios.post(\"/api/authenticate\", credentials)\r\n                .then(response => {\r\n                    sessionStorage.setItem(\"token\", response.data.token);\r\n                    axios.defaults.headers.common['Authorization'] = \"Bearer \" + response.data.token;\r\n\r\n                    if(this.props.location.state !== undefined) {\r\n                        const { prevPath } = this.props.location.state;\r\n                        window.location.href = prevPath;\r\n                    } else {\r\n                        window.location.href = \"/home\"\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        errorMessage: handleErrorResponse(error.response)\r\n                    });\r\n                });\r\n        } else {\r\n            this.setState({\r\n                errorMessage: \"Wypełnij wszystkie pola!\"\r\n            });\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (sessionStorage.getItem(\"token\") !== null) {\r\n            redirectHome()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let { email, password, errorMessage } = this.state;\r\n\r\n        return (\r\n            <div className=\"content\">\r\n                <div className=\"sign-form\">\r\n                    <h2>Logowanie</h2>\r\n                    <input type=\"text\" name=\"email\" placeholder=\"E-MAIL\" autoComplete=\"new-off\" onChange={this.handleOnChange}/>\r\n                    <input type=\"password\" name=\"password\" placeholder=\"HASŁO\" onChange={this.handleOnChange} />\r\n\r\n                    { errorMessage && <div className=\"error-message\">{errorMessage}</div> }\r\n\r\n                    <button disabled={ !email || !password } onClick={this.signIn}>Zaloguj się</button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SignIn;","import React from 'react';\r\nimport './SignForms.css';\r\nimport axios from 'axios';\r\nimport { handleErrorResponse, redirectHome } from '../../HelperMethods';\r\n\r\nclass SignUp extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            firstName: undefined,\r\n            lastName: undefined,\r\n            email: undefined,\r\n            password: undefined,\r\n            repassword: undefined,\r\n            address: undefined,\r\n            city: undefined,\r\n            zipCode: undefined,\r\n            phoneNumber: undefined,\r\n            isNextFormSelected: false,\r\n            errorMessage: undefined\r\n        }\r\n\r\n        this.signUp = this.signUp.bind(this);\r\n        this.handleOnChange = this.handleOnChange.bind(this);\r\n    }\r\n\r\n    signUp() {\r\n        const data = {\r\n            firstName: this.state.firstName,\r\n            lastName: this.state.lastName,\r\n            email: this.state.email,\r\n            password: this.state.password,\r\n            address: this.state.address,\r\n            city: this.state.city,\r\n            zipCode: this.state.zipCode,\r\n            phoneNumber: this.state.phoneNumber\r\n        }\r\n\r\n        axios.post(\"/api/register\", data)\r\n        .then(response => {\r\n            window.location.href = \"/sign-in\";\r\n        })\r\n        .catch(error => {\r\n            this.setState({\r\n                errorMessage: handleErrorResponse(error.response)\r\n            });\r\n        });\r\n    }\r\n\r\n    selectPreviousForm() {\r\n        this.setState({\r\n            isNextFormSelected: false\r\n        })\r\n    }\r\n\r\n    selectNextForm() {\r\n        if (this.state.password === this.state.repassword) {\r\n            if(this.state.password.length > 7) {\r\n                this.setState({\r\n                    isNextFormSelected: true,\r\n                    errorMessage: undefined\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    errorMessage: \"Hasło jest za krótkie! Powinno składać się z co najmniej 8 znaków.\"\r\n                })\r\n            }\r\n        } else {\r\n            this.setState({\r\n                errorMessage: \"Hasła się różnią!\"\r\n            })\r\n        }\r\n    }\r\n\r\n    handleOnChange(element) {\r\n        this.setState({\r\n            [element.target.name]: element.target.value\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (sessionStorage.getItem(\"token\") !== null) {\r\n            redirectHome()\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let { firstName, lastName, email, password, repassword, address, city, zipCode, phoneNumber, isNextFormSelected, errorMessage } = this.state;\r\n\r\n        return (\r\n            <div className=\"content\">\r\n                <div className=\"sign-form\">\r\n                    <h2>Tworzenie nowego konta</h2>\r\n                    <div className={`user-info ${isNextFormSelected ? \"slide-out-left\" : \"slide-in-right\"}`} >\r\n                        <input type=\"text\" name=\"firstName\" placeholder=\"IMIĘ\" autoComplete=\"off1\" onChange={this.handleOnChange} />\r\n                        <input type=\"text\" name=\"lastName\" placeholder=\"NAZWISKO\" autoComplete=\"off2\" onChange={this.handleOnChange} />\r\n                        <input type=\"email\" name=\"email\" placeholder=\"E-MAIL\" autoComplete=\"off3\" onChange={this.handleOnChange} />\r\n                        <input type=\"password\" name=\"password\" placeholder=\"HASŁO\"  minLength=\"8\" maxLength=\"16\" onChange={this.handleOnChange} />\r\n                        <input type=\"password\" name=\"repassword\" placeholder=\"POWTÓRZ HASŁO\" minLength=\"8\" maxLength=\"16\" onChange={this.handleOnChange} />\r\n                        \r\n                        {errorMessage && <div className=\"error-message\">{errorMessage}</div>}\r\n                        <button disabled={!firstName || !lastName || !email || !password || !repassword} onClick={() => this.selectNextForm()} >Dalej</button>\r\n                    </div>\r\n                    \r\n                    <div className={`user-contact ${isNextFormSelected ? \"slide-in-left\" : \"slide-out-right\"}`}>\r\n                        <input type=\"text\" name=\"address\" placeholder=\"ADRES\" autoComplete=\"off4\" onChange={this.handleOnChange} />\r\n                        <input type=\"text\" name=\"city\" placeholder=\"MIEJSCOWOŚĆ\" autoComplete=\"off5\" onChange={this.handleOnChange} />\r\n                        <input type=\"text\" name=\"zipCode\" placeholder=\"KOD POCZTOWY\" pattern=\"\\d*\" maxLength=\"5\" autoComplete=\"off6\" onChange={this.handleOnChange} />\r\n                        <input type=\"text\" name=\"phoneNumber\" placeholder=\"NUMER TELEFONU\" pattern=\"\\d*\" maxLength=\"9\" autoComplete=\"off7\" onChange={this.handleOnChange} />\r\n                        \r\n                        {errorMessage && <div className=\"error-message\">{errorMessage}</div>}\r\n                        <button className=\"secondary\" onClick={() => this.selectPreviousForm()} >Wróć</button>\r\n                        <button disabled={!address || !city || !zipCode || !phoneNumber} onClick={this.signUp}>Załóż konto</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SignUp;","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Books.css';\r\nimport { getUserPermissions, handleErrorResponse } from '../../HelperMethods';\r\nimport { USER_PERMISSIONS } from '../../Constants';\r\nimport MessageModal from '../Modals/MessageModal';\r\n\r\nclass BookDetails extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            bookId: this.props.match.params.bookId,\r\n            book: {},\r\n            bookName: undefined,\r\n            bookAuthor: undefined,\r\n            bookImage: undefined,\r\n            bookQuantity: undefined,\r\n            bookCategories: [],\r\n            availableCopies: undefined,\r\n            isModalOpen: false,\r\n            isBookModalOpen: false,\r\n            message: undefined\r\n        }\r\n\r\n        // API call functions\r\n        this.addReservation = this.addReservation.bind(this);\r\n        this.updateBook = this.updateBook.bind(this);\r\n\r\n        // Handlers\r\n        this.addCategoryToBook = this.addCategoryToBook.bind(this);\r\n        this.deleteCategoryFromBook = this.deleteCategoryFromBook.bind(this);\r\n        this.handleOnChange = this.handleOnChange.bind(this);\r\n        this.setModalStatus = this.setModalStatus.bind(this);\r\n    }\r\n\r\n    addReservation() {\r\n        axios.post(\"/api/reservations/\" + this.state.bookId)\r\n            .then(response => {\r\n                this.setState({\r\n                    isModalOpen: true,\r\n                    message: \"Rezerwacja się powiodła! Masz 2 dni na odbiór książki.\"\r\n                })\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    isModalOpen: true,\r\n                    message: handleErrorResponse(error.response)\r\n                });\r\n            });\r\n    }\r\n\r\n    updateBook() {\r\n        const updatedBook = {\r\n            name: this.state.bookName,\r\n            author: this.state.bookAuthor,\r\n            image: this.state.bookImage,\r\n            quantity: this.state.bookQuantity,\r\n            categories: this.state.bookCategories\r\n        }\r\n\r\n        axios.put(\"/api/library/books/\" + this.state.bookId, updatedBook)\r\n            .then(response => {\r\n                const updatedBookData = response.data.book;\r\n                this.setState({\r\n                    book: updatedBookData,\r\n                    bookName: updatedBookData.name,\r\n                    bookAuthor: updatedBookData.author,\r\n                    bookImage: updatedBookData.image,\r\n                    bookQuantity: updatedBookData.quantity,\r\n                    bookCategories: updatedBookData.categories.map(({ name }) => name),\r\n                    availableCopies: response.data.availableCopies,\r\n                    isBookModalOpen: false\r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                this.setState({\r\n                    errorMessage: handleErrorResponse(error.response)\r\n                });\r\n            });\r\n    }\r\n\r\n    setModalStatus(status) {\r\n        this.setState({\r\n            isModalOpen: status\r\n        })\r\n    }\r\n\r\n    setBookModalStatus(status) {\r\n        this.setState({\r\n            isBookModalOpen: status\r\n        })\r\n    }\r\n\r\n    handleOnChange(element) {\r\n        this.setState({\r\n            [element.target.name]: element.target.value,\r\n            errorMessage: undefined\r\n        })\r\n    }\r\n\r\n    addCategoryToBook(element) {\r\n        const category = element.target.value;\r\n        let { bookCategories, displayedCategories } = this.state;\r\n        bookCategories.push(category);\r\n        displayedCategories.splice(displayedCategories.indexOf(category), 1);\r\n\r\n        this.setState({\r\n            bookCategories: bookCategories,\r\n            displayedCategories: displayedCategories\r\n        })\r\n    }\r\n\r\n    deleteCategoryFromBook(category) {\r\n        let { bookCategories, displayedCategories } = this.state;\r\n        bookCategories.splice(bookCategories.indexOf(category), 1);\r\n        displayedCategories.push(category);\r\n\r\n        this.setState({\r\n            bookCategories: bookCategories,\r\n            displayedCategories: displayedCategories\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(\"/api/books/\" + this.state.bookId)\r\n            .then(response => {\r\n                const bookData = response.data.book;\r\n                this.setState({\r\n                    book: bookData,\r\n                    bookName: bookData.name,\r\n                    bookAuthor: bookData.author,\r\n                    bookImage: bookData.image,\r\n                    bookQuantity: bookData.quantity,\r\n                    bookCategories: bookData.categories.map(({ name }) => name),\r\n                    availableCopies: response.data.availableCopies\r\n                })\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    isModalOpen: true,\r\n                    message: handleErrorResponse(error.response)\r\n                });\r\n            });\r\n\r\n        axios.get(\"/api/categories\")\r\n            .then(response => {\r\n                let categorySet = response.data.map(({ name }) => name)\r\n                categorySet = categorySet.sort(function (a, b) {\r\n                    if (a < b) { return -1; }\r\n                    if (a > b) { return 1; }\r\n                    return 0;\r\n                })\r\n\r\n                this.setState({\r\n                    categories: categorySet.slice(),\r\n                    displayedCategories: categorySet.slice()\r\n                })\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    errorMessage: handleErrorResponse(error.response)\r\n                });\r\n            });\r\n    }\r\n\r\n    render() {\r\n\r\n        // Objects and form variables\r\n        let { book, bookName, bookAuthor, bookImage, bookQuantity, bookCategories, displayedCategories, availableCopies } = this.state;\r\n\r\n        // Handlers and messages\r\n        let { isModalOpen, isBookModalOpen, message } = this.state;\r\n\r\n        const token = sessionStorage.getItem(\"token\");\r\n        const userPermissions = getUserPermissions();\r\n\r\n        return (\r\n            <div className=\"content\">\r\n                { isModalOpen && <MessageModal message={message} setModalStatus={this.setModalStatus} />}\r\n                { isBookModalOpen && <div className=\"modal\">\r\n                    <div className=\"modal-container\">\r\n                        <i className=\"fas fa-times\" onClick={() => this.setBookModalStatus(false)}></i>\r\n                        <div className=\"sign-form\">\r\n                            <h2>Edycja danych książki</h2>\r\n                            <input type=\"text\" name=\"bookName\" value={bookName} placeholder=\"TYTUŁ KSIĄŻKI\" autoComplete=\"off1\" onChange={this.handleOnChange} />\r\n                            <input type=\"text\" name=\"bookAuthor\" value={bookAuthor} placeholder=\"AUTOR\" autoComplete=\"off2\" onChange={this.handleOnChange} />\r\n                            <input type=\"text\" name=\"bookImage\" value={bookImage} placeholder=\"OKŁADKA (URL)\" autoComplete=\"off3\" onChange={this.handleOnChange} />\r\n                            <input type=\"number\" name=\"bookQuantity\" value={bookQuantity} placeholder=\"ILOŚĆ EGZEMPLARZY\" autoComplete=\"off4\" onChange={this.handleOnChange} />\r\n                            <div className=\"category-container\">\r\n                                {bookCategories !== [] && bookCategories.map((category) => (\r\n                                    <div key={category} className=\"book-category\" onClick={() => this.deleteCategoryFromBook(category)}>\r\n                                        {category}<i className=\"fas fa-times-circle\"></i>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            <select name=\"selectedCategory\" selected=\"Wybierz kategorie:\" onChange={this.addCategoryToBook}>\r\n                                <option>Wybierz kategorie:</option>\r\n                                {displayedCategories && displayedCategories.map((category) => (\r\n                                    <option key={category}>{category}</option>\r\n                                ))}\r\n                            </select>\r\n                            {message && <div className=\"error-message\">{message}</div>}\r\n                            <button disabled={!bookName || !bookAuthor || !bookQuantity} onClick={this.updateBook}>Zapisz</button>\r\n                        </div>\r\n                    </div>\r\n                </div>}\r\n                {Object.keys(book).length > 0 ? <div className=\"book-container\">\r\n                    <div className=\"book-image\">\r\n                        { book.image !== null ?\r\n                            <img src={book.image} alt={book.name} />\r\n                            :\r\n                            <div><i className=\"fas fa-camera\"></i></div>\r\n                        }\r\n                    </div>\r\n                    <div className=\"book-info\">\r\n                        <h2>{book.name}</h2>\r\n                        <div className=\"book-detail\">{book.author}</div>\r\n                        <div className=\"category-container\">\r\n                            {book.categories && book.categories.map(({ id, name }) => (\r\n                                <div key={id} className=\"book-category\" onClick={() => window.location.href = \"/books?category=\" + name}>{name}</div>\r\n                            ))}\r\n                        </div>\r\n                        <div className=\"book-detail\">Ilość dostępnych sztuk: { availableCopies }</div>\r\n                        <div className=\"book-reservation\">\r\n                            {userPermissions === USER_PERMISSIONS.student &&\r\n                                <button onClick={this.addReservation} disabled={token === null || availableCopies < 1}>Zarezerwuj</button>}\r\n                            {(userPermissions === USER_PERMISSIONS.admin || userPermissions === USER_PERMISSIONS.librarian) &&\r\n                                <button className=\"orange\" onClick={() => this.setBookModalStatus(true)}>Edytuj dane książki</button>}\r\n                            {!token && <div className=\"message\">\r\n                                Aby zarezerwować książkę, konieczne jest posiadanie konta w systemie. <Link to={{ pathname: \"/sign-in\", state: { prevPath: window.location.pathname } }} >Zaloguj się</Link> lub <a href=\"/sign-up\">Załóż konto</a>.\r\n                            </div>}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                    :\r\n                    <h2 style={{ \"textAlign\": \"center\" }}>Nie znaleziono książki.</h2>}\r\n            </div>)\r\n\r\n    }\r\n}\r\nexport default BookDetails;","import axios from 'axios';\r\nimport React from 'react';\r\nimport { USER_PERMISSIONS } from '../../Constants';\r\nimport { getUserPermissions, handleErrorResponse } from '../../HelperMethods';\r\nimport ModalForbidden from '../Modals/ModalForbidden';\r\nimport './Profile.css';\r\n\r\nclass User extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            userId: this.props.match.params.userId,\r\n            user: {},\r\n            forbidden: false\r\n        }\r\n\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        axios.get(\"/api/library/users/\" + this.state.userId)\r\n            .then(response => {\r\n                this.setState({\r\n                    user: response.data\r\n                })\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    message: handleErrorResponse(error.response)\r\n                })\r\n            });\r\n\r\n        const userPermissions = getUserPermissions();\r\n        if (sessionStorage.getItem(\"token\") === null || userPermissions === USER_PERMISSIONS.student) {\r\n            this.setState({\r\n                forbidden: true\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let { user, forbidden } = this.state;\r\n\r\n        return forbidden ?\r\n            <ModalForbidden type={USER_PERMISSIONS.admin} />\r\n            :\r\n            <div className=\"content\">\r\n                {Object.keys(user).length > 0 ?\r\n                    <div className=\"user-profile\">\r\n                        <div className=\"user-info\">\r\n                            <h2>Dane osobowe</h2>\r\n                            <div className=\"user-item\">\r\n                                <label>Email:</label>\r\n                                <input value={user.email} readOnly />\r\n                            </div>\r\n                            <div className=\"user-item\">\r\n                                <label>Imię:</label>\r\n                                <input value={user.firstName} readOnly />\r\n                            </div>\r\n                            <div className=\"user-item\">\r\n                                <label>Nazwisko:</label>\r\n                                <input value={user.lastName} readOnly />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"user-contact\">\r\n                            <h2>Dane kontaktowe</h2>\r\n                            <div className=\"user-item\">\r\n                                <label>Adres:</label>\r\n                                <input name=\"address\" value={user.address} readOnly />\r\n                            </div>\r\n                            <div className=\"user-item\">\r\n                                <label>Miejscowość:</label>\r\n                                <input name=\"city\" value={user.city} readOnly />\r\n                            </div>\r\n                            <div className=\"user-item\">\r\n                                <label>Kod pocztowy:</label>\r\n                                <input name=\"zipCode\" value={user.zipCode} readOnly />\r\n                            </div>\r\n                            <div className=\"user-item\">\r\n                                <label>Telefon:</label>\r\n                                <input name=\"phoneNumber\" value={user.phoneNumber} readOnly />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    :\r\n                    <h2 style={{ \"textAlign\": \"center\" }}>Nie znaleziono użytkownika.</h2>}\r\n            </div>\r\n    }\r\n}\r\n\r\nexport default User;","import { Component } from \"react\";\r\nimport axios from 'axios';\r\nimport { getUserPermissions, handleErrorResponse, transformUserRole } from '../../HelperMethods';\r\nimport { USER_PERMISSIONS } from \"../../Constants\";\r\nimport ModalForbidden from '../Modals/ModalForbidden';\r\nimport MessageModal from \"../Modals/MessageModal\";\r\n\r\nclass UserList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            users: [],\r\n            forbidden: false,\r\n            isModalOpen: false,\r\n            errorMessage: undefined\r\n        }\r\n\r\n        // API call functions\r\n        this.updateUserRole = this.updateUserRole.bind(this);\r\n\r\n        // Handlers\r\n        this.setModalStatus = this.setModalStatus.bind(this);\r\n    }\r\n\r\n    updateUserRole(userId, role) {\r\n        axios.put(\"/api/admin/users/ \" + userId + \"?newRole=\" + role)\r\n        .then(response => {\r\n            let { users } = this.state;\r\n            let userIndex = users.findIndex((obj => obj.id === userId));\r\n            users[userIndex] = response.data;\r\n            this.setState({\r\n                users: users,\r\n                errorMessage: \"Uprawnienia użytkownika zaktualizowano pomyślnie!\",\r\n                isModalOpen: true\r\n            })\r\n        })\r\n        .catch(error => {\r\n            this.setState({\r\n                errorMessage: handleErrorResponse(error.response)\r\n            })\r\n        });\r\n    }\r\n\r\n    setModalStatus(status) {\r\n        this.setState({\r\n            isModalOpen: status,\r\n            errorMessage: undefined\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(\"/api/admin/users\")\r\n            .then(response => {\r\n                this.setState({\r\n                    users: response.data\r\n                })\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    errorMessage: handleErrorResponse(error.response)\r\n                })\r\n            });\r\n\r\n        const userPermissions = getUserPermissions();\r\n        if (sessionStorage.getItem(\"token\") === null || [USER_PERMISSIONS.student, USER_PERMISSIONS.librarian].includes(userPermissions)) {\r\n            this.setState({\r\n                forbidden: true\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let { users, forbidden, isModalOpen, errorMessage } = this.state;\r\n\r\n        return forbidden ?\r\n            <ModalForbidden type={USER_PERMISSIONS.admin} />\r\n            :\r\n            <div className=\"content\">\r\n                { isModalOpen && <MessageModal message={errorMessage} setModalStatus={this.setModalStatus} /> }\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Imie i Nazwisko</th>\r\n                            <th>Email</th>\r\n                            <th>Uprawnienia</th>\r\n                            <th>Działania</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {users && users.map(({ id, firstName, lastName, email, role }) => (\r\n                            <tr key={ id }>\r\n                                <td>\r\n                                    <a href={\"/users/\" + id}>{firstName} {lastName}</a>\r\n                                </td>\r\n                                <td>{email}</td>\r\n                                <td>{ transformUserRole(role) }</td>\r\n                                <td>\r\n                                    {role === USER_PERMISSIONS.student && <button className=\"green\" onClick={() => this.updateUserRole(id, \"LIBRARIAN\")}>Mianuj bibliotekarzem</button>}\r\n                                    {role === USER_PERMISSIONS.librarian && <button className=\"red\" onClick={() => this.updateUserRole(id, \"STUDENT\")}>Zmniejsz uprawnienia</button>}\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n    }\r\n}\r\nexport default UserList;","import React from 'react';\nimport Navbar from './components/Navbar/Navbar';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Home from './components/Home/Home';\nimport Books from './components/Books/Books';\nimport Reservations from './components/Reservations/Reservations';\nimport Profile from './components/Profile/Profile';\nimport SignIn from './components/SignForms/SignIn';\nimport SignUp from './components/SignForms/SignUp';\nimport BookDetails from './components/Books/BookDetails';\nimport User from './components/Profile/User';\nimport UserList from './components/Profile/UserList';\n\nfunction App() {\n\n  const token = sessionStorage.getItem(\"token\");\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <Navbar token={ token } />\n        <Switch>\n          <Route exact path=\"/books/:bookId\" component={ BookDetails } />\n          <Route path={[\"/books?category:category\", \"/books\"]} component={ Books } />\n          <Route path=\"/reservations\" component={ Reservations } />\n          <Route path=\"/sign-in\" component={ SignIn } />\n          <Route path=\"/sign-up\" component={ SignUp } />\n          <Route path=\"/profile\" component={ Profile } />\n          <Route path=\"/users/:userId\" component={ User } />\n          <Route path=\"/users\" component={ UserList } />\n          <Route path={[\"\", \"/home\"]} component={ Home } />\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport axios from \"axios\";\n\naxios.defaults.baseURL = \"http://localhost:8080\";\nif (sessionStorage.getItem(\"token\") !== null) {\n  axios.defaults.headers.common['Authorization'] = \"Bearer \" + sessionStorage.getItem(\"token\");\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}