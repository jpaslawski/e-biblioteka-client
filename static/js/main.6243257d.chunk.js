(this["webpackJsonpe-biblioteka-client"]=this["webpackJsonpe-biblioteka-client"]||[]).push([[0],{32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},49:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),i=a(35),o=a.n(i),r=(a(41),a(22)),c=(a(42),a(9)),l={admin:"ROLE_ADMIN",librarian:"ROLE_LIBRARIAN",student:"ROLE_STUDENT"},d="RESERVED",h="COLLECTED",j="RETURNED";function u(){sessionStorage.clear(),window.location.href="/home"}function b(){window.location.href="/home"}function O(){if(null!==sessionStorage.getItem("token")){var e=sessionStorage.getItem("token").split(".")[1],t=window.atob(e);return JSON.parse(t).role}return null}function m(e){return e?500!==e.status?e.data.message:void u():"B\u0142\u0105d serwera!"}function p(e){return e.sort((function(e,t){return e<t?-1:e>t?1:0}))}function g(e){switch(e){case l.student:return"Student";case l.librarian:return"Bibliotekarz";default:return"Student"}}var k=a(0),v=function(e){var t=e.token,a=n.a.useState(!1),s=Object(r.a)(a,2),i=s[0],o=s[1],d=n.a.useState(!1),h=Object(r.a)(d,2),j=h[0],b=h[1];return Object(k.jsxs)("nav",{children:[Object(k.jsx)("div",{className:"logo",children:Object(k.jsx)("h4",{children:"eBiblioteka"})}),Object(k.jsxs)("div",{className:"burger",onClick:function(){return o(!i)},children:[Object(k.jsx)("div",{className:"line1"}),Object(k.jsx)("div",{className:"line2"}),Object(k.jsx)("div",{className:"line3"})]}),Object(k.jsxs)("ul",{className:i?"nav-active":"",children:[Object(k.jsx)("li",{children:Object(k.jsx)(c.c,{to:"/home",activeClassName:"active",onClick:function(){return o(!1)},children:"Strona g\u0142\xf3wna"})}),Object(k.jsx)("li",{children:Object(k.jsx)(c.c,{to:"/books",activeClassName:"active",onClick:function(){return o(!1)},children:"Ksi\u0105\u017cki"})}),t&&Object(k.jsx)("li",{children:Object(k.jsx)(c.c,{to:"/reservations",activeClassName:"active",onClick:function(){return o(!1)},children:"Rezerwacje"})}),t&&O()===l.admin&&Object(k.jsx)("li",{children:Object(k.jsx)(c.c,{to:"/users",activeClassName:"active",onClick:function(){return o(!1)},children:"U\u017cytkownicy"})}),t&&Object(k.jsxs)("li",{className:"profile-link",onClick:function(){return b(!j)},children:["Profil ",Object(k.jsx)("i",{className:"fas fa-angle-down"})]}),j&&Object(k.jsx)("li",{className:"profile-item",children:Object(k.jsx)(c.b,{to:"/profile",onClick:function(){return o(!1)},children:"M\xf3j profil"})}),j&&Object(k.jsx)("li",{className:"profile-item",children:Object(k.jsx)(c.b,{to:"/home",onClick:function(){o(!1),u()},children:"Wyloguj si\u0119"})}),!t&&Object(k.jsx)("li",{className:"sign-in-link",children:Object(k.jsx)(c.b,{to:{pathname:"/sign-in",state:{prevPath:window.location.pathname}},onClick:function(){return o(!1)},children:"Zaloguj si\u0119"})}),!t&&Object(k.jsx)("li",{className:"sign-up-link",children:Object(k.jsx)(c.b,{to:"/sign-up",onClick:function(){return o(!1)},children:"Za\u0142\xf3\u017c konto"})})]}),t?Object(k.jsxs)("div",{className:"profile",onClick:function(){return b(!j)},children:["Profil ",Object(k.jsx)("i",{className:"fas fa-angle-down"}),Object(k.jsx)("div",{className:j?"profile-options profile-options-active":"profile-options",children:Object(k.jsxs)("ul",{children:[Object(k.jsx)("li",{children:Object(k.jsx)(c.b,{to:"/profile",onClick:function(){return o(!1)},children:"M\xf3j profil"})}),Object(k.jsx)("li",{onClick:function(){return u()},children:"Wyloguj si\u0119"})]})})]}):Object(k.jsxs)("div",{className:"sign-container",children:[Object(k.jsx)("div",{className:"sign-in",children:Object(k.jsx)(c.b,{to:{pathname:"/sign-in",state:{prevPath:window.location.pathname}},onClick:function(){return o(!1)},children:"Zaloguj si\u0119"})}),Object(k.jsx)("div",{className:"sign-up",children:Object(k.jsx)(c.b,{to:"/sign-up",onClick:function(){return o(!1)},children:"Za\u0142\xf3\u017c konto"})})]})]})},x=a(4),f=(a(49),function(){return Object(k.jsxs)("div",{className:"content",children:[Object(k.jsx)("h2",{children:"Internetowa wypo\u017cyczalnia ksi\u0105\u017cek"}),Object(k.jsxs)("div",{className:"description",children:[Object(k.jsx)("p",{children:"Aplikacja umo\u017cliwia reserwacj\u0119, wypo\u017cyczenie oraz zwrot ksi\u0105\u017cek. Ilo\u015b\u0107 egzemplarzy danej ksi\u0105\u017cki jest ograniczona. Aby u\u0142atwi\u0107 proces wyszukiwania ksi\u0105\u017cki utworzono filtry okre\u015blaj\u0105ce gatunek ksi\u0105\u017cki oraz przedmioty, kt\xf3rych mo\u017ce ona dotyczy\u0107."}),Object(k.jsx)("p",{children:"Proces wypo\u017cyczania ksi\u0105\u017cki odbywa si\u0119 na nast\u0119puj\u0105cych zasadach:"}),Object(k.jsxs)("ul",{children:[Object(k.jsxs)("li",{children:["Aby zarezerwowa\u0107 ksi\u0105\u017ck\u0119 niezb\u0119dne jest posiadanie konta na tej stronie. Mo\u017cna je za\u0142o\u017cy\u0107 naciskaj\u0105c ",Object(k.jsx)("b",{children:"Za\u0142\xf3\u017c konto"}),"."]}),Object(k.jsxs)("li",{children:["U\u017cytkownik znajduje interesuj\u0105c\u0105 go ksi\u0105\u017ck\u0119, je\u015bli jest ona dost\u0119pna, naciska ",Object(k.jsx)("b",{children:"Zarezerwuj"}),"."]}),Object(k.jsxs)("li",{children:["U\u017cytkownik ma 2 dni na odbi\xf3r",Object(k.jsx)("b",{children:"*"})," ksi\u0105\u017cki."]}),Object(k.jsx)("li",{children:"Je\u015bli wszystkie egzemplarze danej ksi\u0105\u017cki s\u0105 wypo\u017cyczone, widoczna b\u0119dzie przewidywana data zwrotu ksi\u0105\u017cki przez innego u\u017cytkownika."}),Object(k.jsxs)("li",{children:["Po odbiorze ksi\u0105\u017cki, u\u017cytkownik powinien j\u0105 zwr\xf3ci\u0107",Object(k.jsx)("b",{children:"*"})," do 30 dni od dnia odbioru."]}),Object(k.jsxs)("li",{children:[Object(k.jsx)("b",{children:"*"})," Odbi\xf3r oraz zwrot ksi\u0105\u017cki odbywa si\u0119 na stronie internetowej, w sekcji ",Object(k.jsx)("b",{children:"Wypo\u017cyczenia"}),"."]})]})]})]})}),y=a(5),C=a(6),N=a(2),S=a(8),w=a(7),M=a(3),z=a.n(M),I=(a(32),a(11)),B=function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var s;return Object(y.a)(this,a),(s=t.call(this,e)).state={categoryName:void 0,errorMessage:void 0},s.addCategory=s.addCategory.bind(Object(N.a)(s)),s.handleOnChange=s.handleOnChange.bind(Object(N.a)(s)),s}return Object(C.a)(a,[{key:"handleOnChange",value:function(e){var t;this.setState((t={},Object(I.a)(t,e.target.name,e.target.value),Object(I.a)(t,"errorMessage",void 0),t))}},{key:"addCategory",value:function(){var e=this,t={name:this.state.categoryName};this.props.categories.includes(this.state.categoryName)?this.setState({errorMessage:"Ta kategoria ju\u017c istnieje."}):z.a.post("/api/library/categories",t).then((function(){e.props.updateCategories(e.state.categoryName),e.setState({categoryName:void 0}),e.props.setCategoryModalStatus(!1)})).catch((function(t){e.setState({errorMessage:m(t.response)})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.categoryName,s=t.errorMessage;return Object(k.jsx)("div",{className:"modal",children:Object(k.jsxs)("div",{className:"modal-container",children:[Object(k.jsx)("i",{className:" fas fa-times",onClick:function(){return e.props.setCategoryModalStatus(!1)}}),Object(k.jsxs)("div",{className:"sign-form",children:[Object(k.jsx)("h2",{children:"Dodanie nowej kategorii"}),Object(k.jsx)("input",{type:"text",name:"categoryName",placeholder:"NAZWA KATEGORII",autoComplete:"off",onChange:this.handleOnChange}),s&&Object(k.jsx)("div",{className:"error-message",children:s}),Object(k.jsx)("button",{disabled:!a,onClick:this.addCategory,children:"Dodaj"})]})]})})}}]),a}(s.Component),R=function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var s;return Object(y.a)(this,a),(s=t.call(this,e)).state={displayedCategories:s.props.categories,bookName:void 0,bookAuthor:void 0,bookQuantity:void 0,bookImage:void 0,bookCategories:[],errorMessage:void 0},s.addBook=s.addBook.bind(Object(N.a)(s)),s.handleOnChange=s.handleOnChange.bind(Object(N.a)(s)),s.addCategoryToBook=s.addCategoryToBook.bind(Object(N.a)(s)),s.deleteCategoryFromBook=s.deleteCategoryFromBook.bind(Object(N.a)(s)),s}return Object(C.a)(a,[{key:"handleOnChange",value:function(e){var t;this.setState((t={},Object(I.a)(t,e.target.name,e.target.value),Object(I.a)(t,"errorMessage",void 0),t))}},{key:"addBook",value:function(){var e=this,t={name:this.state.bookName,author:this.state.bookAuthor,image:this.state.bookImage,quantity:this.state.bookQuantity,categories:this.state.bookCategories};z.a.post("/api/library/books",t).then((function(t){e.props.updateBooks(t.data),e.setState({bookName:void 0,bookAuthor:void 0,bookImage:void 0,bookQuantity:void 0,bookCategories:[],displayedCategories:[]}),e.props.setBookModalStatus(!1)})).catch((function(t){e.setState({errorMessage:m(t.response)})}))}},{key:"addCategoryToBook",value:function(e){var t=e.target.value,a=this.state,s=a.bookCategories,n=a.displayedCategories;s.push(t),n.splice(n.indexOf(t),1),this.setState({bookCategories:s,displayedCategories:n})}},{key:"deleteCategoryFromBook",value:function(e){var t=this.state,a=t.bookCategories,s=t.displayedCategories;a.splice(a.indexOf(e),1),s.push(e),this.setState({bookCategories:a,displayedCategories:s})}},{key:"render",value:function(){var e=this,t=this.state,a=t.bookName,s=t.bookAuthor,n=t.bookQuantity,i=t.bookCategories,o=t.displayedCategories,r=t.errorMessage;return Object(k.jsx)("div",{className:"modal",children:Object(k.jsxs)("div",{className:"modal-container",children:[Object(k.jsx)("i",{className:"fas fa-times",onClick:function(){return e.props.setBookModalStatus(!1)}}),Object(k.jsxs)("div",{className:"sign-form",children:[Object(k.jsx)("h2",{children:"Dodanie nowej ksi\u0105\u017cki"}),Object(k.jsx)("input",{type:"text",name:"bookName",placeholder:"TYTU\u0141 KSI\u0104\u017bKI",autoComplete:"off1",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"text",name:"bookAuthor",placeholder:"AUTOR",autoComplete:"off2",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"text",name:"bookImage",placeholder:"OK\u0141ADKA (URL)",autoComplete:"off3",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"number",name:"bookQuantity",placeholder:"ILO\u015a\u0106 EGZEMPLARZY",autoComplete:"off4",onChange:this.handleOnChange}),Object(k.jsx)("div",{className:"category-container",children:i!==[]&&i.map((function(t){return Object(k.jsxs)("div",{className:"book-category",onClick:function(){return e.deleteCategoryFromBook(t)},children:[t,Object(k.jsx)("i",{className:"fas fa-times-circle"})]},t)}))}),Object(k.jsxs)("select",{name:"selectedCategory",selected:"Wybierz kategorie:",onChange:this.addCategoryToBook,children:[Object(k.jsx)("option",{children:"Wybierz kategorie:"}),o&&o.map((function(e){return Object(k.jsx)("option",{children:e},e)}))]}),r&&Object(k.jsx)("div",{className:"error-message",children:r}),Object(k.jsx)("button",{disabled:!a||!s||!n,onClick:this.addBook,children:"Dodaj"})]})]})})}}]),a}(s.Component),A=function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var s;return Object(y.a)(this,a),(s=t.call(this,e)).state={books:[],displayedBooks:[],selectedCategory:void 0,categories:[],chosenCategories:[],isCategoryModalOpen:!1,isBookModalOpen:!1,errorMessage:void 0},s.updateBooks=s.updateBooks.bind(Object(N.a)(s)),s.updateCategories=s.updateCategories.bind(Object(N.a)(s)),s.setCategoryModalStatus=s.setCategoryModalStatus.bind(Object(N.a)(s)),s.setBookModalStatus=s.setBookModalStatus.bind(Object(N.a)(s)),s}return Object(C.a)(a,[{key:"handleFilter",value:function(e){var t=this.state.chosenCategories;t.includes(e)?t.pop(e):t.push(e),t.length>0?this.setState({chosenCategories:t,displayedBooks:this.state.books.filter((function(e){return e.categories.find((function(e){var a=e.name;return t.includes(a)}))}))}):this.setState({displayedBooks:this.state.books})}},{key:"clearFilter",value:function(){this.setState({chosenCategories:[],displayedBooks:this.state.books})}},{key:"setCategoryModalStatus",value:function(e){this.setState({isCategoryModalOpen:e})}},{key:"setBookModalStatus",value:function(e){this.setState({isBookModalOpen:e})}},{key:"updateBooks",value:function(e){var t=this.state.books;t.push(e),this.setState({books:t})}},{key:"updateCategories",value:function(e){var t=this.state.categories;t.push(e),this.setState({categories:p(t).slice(),displayedCategories:p(t).slice()})}},{key:"componentDidMount",value:function(){var e=this;z.a.get("/api/books").then((function(t){e.setState({books:t.data,displayedBooks:t.data});var a=new URLSearchParams(e.props.location.search).get("category");null!=a&&e.handleFilter(a)})).catch((function(t){e.setState({errorMessage:m(t.response)})})),z.a.get("/api/categories").then((function(t){var a=t.data.map((function(e){return e.name}));e.setState({categories:p(a).slice(),displayedCategories:p(a).slice()})})).catch((function(t){e.setState({errorMessage:m(t.response)})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.displayedBooks,s=t.categories,n=t.chosenCategories,i=t.isCategoryModalOpen,o=t.isBookModalOpen,r=O();return Object(k.jsxs)("div",{className:"content",children:[i&&Object(k.jsx)(B,{categories:s,setCategoryModalStatus:this.setCategoryModalStatus,updateCategories:this.updateCategories}),o&&Object(k.jsx)(R,{categories:s,setBookModalStatus:this.setBookModalStatus,updateBooks:this.updateBooks}),Object(k.jsxs)("div",{className:"filter",children:[Object(k.jsx)("span",{children:"Kategorie:"}),Object(k.jsx)("div",{className:"filter-container",children:s&&s.map((function(t){return Object(k.jsxs)("div",{className:"filter-item",children:[Object(k.jsx)("input",{type:"checkbox",name:t,onChange:function(){return e.handleFilter(t)},checked:n.includes(t)}),Object(k.jsx)("label",{htmlFor:t,children:t})]},t)}))}),Object(k.jsxs)("div",{className:"button-group",children:[(r===l.admin||r===l.librarian)&&Object(k.jsx)("button",{className:"green",onClick:function(){return e.setCategoryModalStatus(!i)},children:"Dodaj kategori\u0119"}),Object(k.jsx)("button",{onClick:function(){return e.clearFilter()},children:"Wyczy\u015b\u0107"})]})]}),Object(k.jsxs)("div",{className:"card-container",children:[(r===l.admin||r===l.librarian)&&Object(k.jsxs)("div",{className:"card add-book",onClick:function(){return e.setBookModalStatus(!0)},children:[Object(k.jsx)("i",{className:"far fa-plus-square"}),Object(k.jsx)("div",{className:"card-info",children:Object(k.jsx)("h3",{children:"Dodaj ksi\u0105\u017ck\u0119"})})]}),a&&a.map((function(e){var t,a=e.id,s=e.name,n=e.author,i=e.image;return Object(k.jsx)("a",{href:"/books/"+a,children:Object(k.jsxs)("div",{className:null===i?"no-image card":"card",children:[null!==i?Object(k.jsx)("img",{src:i,alt:s},i):Object(k.jsx)("i",{className:"fas fa-camera"}),Object(k.jsxs)("div",{className:"card-info",children:[Object(k.jsx)("h3",{children:(t=s,t.length>50?t.substring(0,50)+"...":t)}),Object(k.jsx)("div",{children:n})]})]})},a)}))]}),0===a.length&&Object(k.jsx)("div",{className:"no-content",children:"Nie znaleziono \u017cadnych ksi\u0105\u017cek."})]})}}]),a}(s.Component),D=(a(68),function(e){var t=e.type;return Object(k.jsx)("div",{className:"modal",children:Object(k.jsxs)("div",{className:"modal-container",children:[Object(k.jsx)("h2",{children:"B\u0141\u0104D 403"}),t&&t===l.admin?Object(k.jsx)("div",{children:"Dost\u0119p do tej strony jest zarezerwowany dla u\u017cytkownik\xf3w o wy\u017cszych uprawnieniach."}):Object(k.jsx)("div",{children:"Dost\u0119p do tej strony maj\u0105 tylko u\u017cytkownicy zalogowani."}),t&&t===l.admin?Object(k.jsx)("button",{children:Object(k.jsx)(c.b,{to:{pathname:"/home",state:{prevPath:window.location.pathname}},children:"Strona g\u0142\xf3wna"})}):Object(k.jsx)("button",{children:Object(k.jsx)(c.b,{to:{pathname:"/sign-in",state:{prevPath:window.location.pathname}},children:"Zaloguj si\u0119"})})]})})}),E=function(e){var t=e.displayedReservations,a=e.changeBookStatus;return Object(k.jsxs)("table",{children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Ksi\u0105\u017cka"}),Object(k.jsx)("th",{children:"Data rezerwacji"}),Object(k.jsx)("th",{children:"Status"}),Object(k.jsx)("th",{children:"Dzia\u0142ania"})]})}),Object(k.jsx)("tbody",{children:t&&t.map((function(e){var t=e.id,s=e.book,n=e.date,i=e.status;return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:Object(k.jsx)("a",{href:"/books/"+s.id,children:s.name})}),Object(k.jsx)("td",{children:new Date(n).toLocaleString()}),Object(k.jsxs)("td",{children:[i===d&&"Gotowa do obioru",i===h&&"Wypo\u017cyczona",i===j&&"Zwr\xf3cona"]}),Object(k.jsxs)("td",{children:[i===d&&Object(k.jsx)("button",{onClick:function(){return a(t,h)},children:"ODBIERZ"}),i===h&&Object(k.jsx)("button",{onClick:function(){return a(t,j)},children:"ZWR\xd3\u0106"})]})]},t)}))})]})},P=function(e){var t=e.displayedReservations;return Object(k.jsxs)("table",{children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"U\u017cytkownik"}),Object(k.jsx)("th",{children:"Ksi\u0105\u017cka"}),Object(k.jsx)("th",{children:"Data rezerwacji"}),Object(k.jsx)("th",{children:"Status"})]})}),Object(k.jsx)("tbody",{children:t&&t.map((function(e){var t=e.id,a=e.book,s=e.date,n=e.status,i=e.user;return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:Object(k.jsxs)("a",{href:"/users/"+i.id,children:[i.firstName," ",i.lastName]})},i.id),Object(k.jsx)("td",{children:Object(k.jsx)("a",{href:"/books/"+a.id,children:a.name})}),Object(k.jsx)("td",{children:new Date(s).toLocaleString()}),Object(k.jsxs)("td",{children:[n===d&&"Gotowa do obioru",n===h&&"Wypo\u017cyczona",n===j&&"Zwr\xf3cona"]})]},t)}))})]})},U=function(e){var t=e.message,a=e.setModalStatus;return Object(k.jsx)("div",{className:"modal",children:Object(k.jsxs)("div",{className:"modal-container",children:[Object(k.jsx)("i",{className:" fas fa-times",onClick:function(){return a(!1)}}),Object(k.jsx)("div",{children:t})]})})},L=function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var s;return Object(y.a)(this,a),(s=t.call(this,e)).state={bookId:s.props.match.params.bookId,reservations:[],displayedReservations:[],statusSet:[],isModalOpen:!1,message:void 0,forbidden:!1},s.changeBookStatus=s.changeBookStatus.bind(Object(N.a)(s)),s.setModalStatus=s.setModalStatus.bind(Object(N.a)(s)),s}return Object(C.a)(a,[{key:"handleFilter",value:function(e){var t=this.state.statusSet;t.includes(e)?t.pop(e):t.push(e),t.length>0?this.setState({statusSet:t,displayedReservations:this.state.reservations.filter((function(e){return t.includes(e.status)}))}):this.setState({displayedReservations:this.state.reservations})}},{key:"clearFilter",value:function(){this.setState({statusSet:[],displayedReservations:this.state.reservations})}},{key:"setModalStatus",value:function(e){this.setState({isModalOpen:e})}},{key:"changeBookStatus",value:function(e,t){var a=this;z.a.put("/api/reservations/"+e+"?newStatus="+t).then((function(e){var s=e.data,n=a.state.reservations;n[n.findIndex((function(e){return e.id===s.id}))]=s;var i="";i=t===h?"Pomy\u015blnie odebrano ksi\u0105\u017ck\u0119! Pami\u0119taj, aby zwr\xf3ci\u0107 j\u0105 do 30 dni.":"Dzi\u0119kujemy za zwrot ksi\u0105\u017cki.",a.setState({reservations:n.slice(),displayedReservations:n.slice(),isModalOpen:!0,message:i})})).catch((function(e){a.setState({isModalOpen:!0,message:m(e.response)})}))}},{key:"componentDidMount",value:function(){var e=this,t=O();t===l.admin||t===l.librarian?z.a.get("/api/library/reservations").then((function(t){var a=t.data;e.setState({reservations:a.slice(),displayedReservations:a.slice()})})).catch((function(t){e.setState({isModalOpen:!0,message:m(t.response)})})):z.a.get("/api/reservations").then((function(t){var a=t.data;e.setState({reservations:a.slice(),displayedReservations:a.slice()})})).catch((function(t){e.setState({isModalOpen:!0,message:m(t.response)})})),null===sessionStorage.getItem("token")&&this.setState({forbidden:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.displayedReservations,s=t.statusSet,n=t.isModalOpen,i=t.message,o=t.forbidden,r=O();return o?Object(k.jsx)(D,{}):Object(k.jsxs)("div",{className:"content",children:[n&&Object(k.jsx)(U,{message:i,setModalStatus:this.setModalStatus}),Object(k.jsxs)("div",{className:"filter",children:[Object(k.jsx)("span",{children:"Status:"}),Object(k.jsxs)("div",{className:"filter-container",children:[Object(k.jsxs)("div",{className:"filter-item",children:[Object(k.jsx)("input",{type:"checkbox",name:"RESERVED",onChange:function(){return e.handleFilter(d)},checked:s.includes(d)}),Object(k.jsx)("label",{htmlFor:"RESERVED",children:"Gotowe do odbioru"})]}),Object(k.jsxs)("div",{className:"filter-item",children:[Object(k.jsx)("input",{type:"checkbox",name:"COLLECTED",onChange:function(){return e.handleFilter(h)},checked:s.includes(h)}),Object(k.jsx)("label",{htmlFor:"COLLECTED",children:"Wypo\u017cyczone"})]}),Object(k.jsxs)("div",{className:"filter-item",children:[Object(k.jsx)("input",{type:"checkbox",name:"RETURNED",onChange:function(){return e.handleFilter(j)},checked:s.includes(j)}),Object(k.jsx)("label",{htmlFor:"RETURNED",children:"Zwr\xf3cone"})]})]}),Object(k.jsx)("div",{className:"button-group",style:{marginTop:"10px"},children:Object(k.jsx)("button",{onClick:function(){return e.clearFilter()},children:"Wyczy\u015b\u0107"})})]}),a.length>0?Object(k.jsx)("div",{children:r===l.student?Object(k.jsx)(E,{displayedReservations:a,changeBookStatus:this.changeBookStatus}):Object(k.jsx)(P,{displayedReservations:a})}):Object(k.jsx)("div",{className:"no-content",children:"Nie znaleziono \u017cadnych rezerwacji..."})]})}}]),a}(n.a.Component),T=(a(33),function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var s;return Object(y.a)(this,a),(s=t.call(this,e)).state={userInfo:{},userContact:{},newPassword:void 0,repassword:void 0,address:void 0,city:void 0,zipCode:void 0,phoneNumber:void 0,isModalOpen:!1,isPasswordModalOpen:!1,message:void 0,forbidden:!1},s.saveUserContact=s.saveUserContact.bind(Object(N.a)(s)),s.updateUserPassword=s.updateUserPassword.bind(Object(N.a)(s)),s.handleOnChange=s.handleOnChange.bind(Object(N.a)(s)),s.setModalStatus=s.setModalStatus.bind(Object(N.a)(s)),s}return Object(C.a)(a,[{key:"handleOnChange",value:function(e){this.setState(Object(I.a)({},e.target.name,e.target.value))}},{key:"setModalStatus",value:function(e){this.setState({isModalOpen:e,message:void 0})}},{key:"setPasswordModalStatus",value:function(e){this.setState({isPasswordModalOpen:e})}},{key:"updateUserPassword",value:function(){var e=this;if(this.state.newPassword===this.state.repassword)if(this.state.newPassword.length>7){var t={email:this.state.userInfo.email,firstName:this.state.userInfo.firstName,lastName:this.state.userInfo.lastName,password:this.state.newPassword};z.a.put("/api/users/profile",t).then((function(){e.setState({message:"Has\u0142o zosta\u0142o pomy\u015blnie zaktualizowane!",isPasswordModalOpen:!1,isModalOpen:!0})})).catch((function(t){e.setState({message:m(t.response)})}))}else this.setState({message:"Has\u0142o jest za kr\xf3tkie!"});else this.setState({message:"Has\u0142a si\u0119 r\xf3\u017cni\u0105!"})}},{key:"saveUserContact",value:function(){var e=this,t={address:this.state.address,city:this.state.city,zipCode:this.state.zipCode,phoneNumber:this.state.phoneNumber};z.a.put("/api/users/contact",t).then((function(){e.setState({message:"Dane kontaktowy zosta\u0142y pomy\u015blnie zaktualizowane!",isModalOpen:!0})})).catch((function(t){e.setState({message:m(t.response)})}))}},{key:"componentDidMount",value:function(){var e=this;z.a.get("/api/users/profile").then((function(t){e.setState({userInfo:t.data})})).catch((function(t){e.setState({message:m(t.response)})})),z.a.get("/api/users/contact").then((function(t){var a=t.data;e.setState({address:a.address,city:a.city,zipCode:a.zipCode,phoneNumber:a.phoneNumber})})).catch((function(t){e.setState({message:m(t.response)})})),null===sessionStorage.getItem("token")&&this.setState({forbidden:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.userInfo,s=t.newPassword,n=t.repassword,i=t.address,o=t.city,r=t.zipCode,c=t.phoneNumber,l=this.state,d=l.isModalOpen,h=l.isPasswordModalOpen,j=l.message;return l.forbidden?Object(k.jsx)(D,{}):Object(k.jsxs)("div",{className:"content",children:[d&&Object(k.jsx)(U,{message:j,setModalStatus:this.setModalStatus}),h&&Object(k.jsx)("div",{className:"modal",children:Object(k.jsxs)("div",{className:"modal-container",children:[Object(k.jsx)("i",{className:"fas fa-times",onClick:function(){return e.setPasswordModalStatus(!1)}}),Object(k.jsxs)("div",{className:"sign-form",children:[Object(k.jsx)("h2",{children:"Zmiana has\u0142a"}),Object(k.jsx)("input",{type:"password",name:"newPassword",placeholder:"HAS\u0141O",minLength:"8",maxLength:"16",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"password",name:"repassword",placeholder:"POWT\xd3RZ HAS\u0141O",minLength:"8",maxLength:"16",onChange:this.handleOnChange}),j&&Object(k.jsx)("div",{className:"error-message",children:j}),Object(k.jsx)("button",{disabled:!s||!n,onClick:this.updateUserPassword,children:"Zapisz"})]})]})}),Object(k.jsxs)("div",{className:"user-profile",children:[Object(k.jsxs)("div",{className:"user-info",children:[Object(k.jsx)("h2",{children:"Dane osobowe"}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Email:"}),Object(k.jsx)("input",{value:a.email,readOnly:!0})]}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Imi\u0119:"}),Object(k.jsx)("input",{value:a.firstName,readOnly:!0})]}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Nazwisko:"}),Object(k.jsx)("input",{value:a.lastName,readOnly:!0})]}),Object(k.jsx)("div",{className:"button-container",children:Object(k.jsx)("button",{onClick:function(){return e.setPasswordModalStatus(!0)},children:"Zmie\u0144 has\u0142o"})})]}),Object(k.jsxs)("div",{className:"user-contact",children:[Object(k.jsx)("h2",{children:"Dane kontaktowe"}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Adres:"}),Object(k.jsx)("input",{type:"text",name:"address",value:i,autoComplete:"off1",onChange:this.handleOnChange})]}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Miejscowo\u015b\u0107:"}),Object(k.jsx)("input",{type:"text",name:"city",value:o,autoComplete:"off2",onChange:this.handleOnChange})]}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Kod pocztowy:"}),Object(k.jsx)("input",{type:"text",name:"zipCode",value:r,pattern:"\\d*",maxLength:"5",autoComplete:"off3",onChange:this.handleOnChange})]}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Telefon:"}),Object(k.jsx)("input",{type:"text",name:"phoneNumber",value:c,pattern:"\\d*",maxLength:"9",autoComplete:"off4",onChange:this.handleOnChange})]}),Object(k.jsx)("div",{className:"button-container",children:Object(k.jsx)("button",{onClick:this.saveUserContact,children:"Zapisz"})})]})]})]})}}]),a}(n.a.Component)),F=(a(34),function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var s;return Object(y.a)(this,a),(s=t.call(this,e)).state={email:void 0,password:void 0,errorMessage:void 0},s.handleOnChange=s.handleOnChange.bind(Object(N.a)(s)),s.signIn=s.signIn.bind(Object(N.a)(s)),s}return Object(C.a)(a,[{key:"handleOnChange",value:function(e){this.setState(Object(I.a)({},e.target.name,e.target.value))}},{key:"signIn",value:function(){var e=this;if(this.state.email&&this.state.password){var t={email:this.state.email,password:this.state.password};z.a.post("/api/authenticate",t).then((function(t){if(sessionStorage.setItem("token",t.data.token),z.a.defaults.headers.common.Authorization="Bearer "+t.data.token,void 0!==e.props.location.state){var a=e.props.location.state.prevPath;window.location.href=a}else window.location.href="/home"})).catch((function(t){e.setState({errorMessage:m(t.response)})}))}else this.setState({errorMessage:"Wype\u0142nij wszystkie pola!"})}},{key:"componentDidMount",value:function(){null!==sessionStorage.getItem("token")&&b()}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,s=e.errorMessage;return Object(k.jsx)("div",{className:"content",children:Object(k.jsxs)("div",{className:"sign-form",children:[Object(k.jsx)("h2",{children:"Logowanie"}),Object(k.jsx)("input",{type:"text",name:"email",placeholder:"E-MAIL",autoComplete:"new-off",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"password",name:"password",placeholder:"HAS\u0141O",onChange:this.handleOnChange}),s&&Object(k.jsx)("div",{className:"error-message",children:s}),Object(k.jsx)("button",{disabled:!t||!a,onClick:this.signIn,children:"Zaloguj si\u0119"})]})})}}]),a}(n.a.Component)),Z=function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var s;return Object(y.a)(this,a),(s=t.call(this,e)).state={firstName:void 0,lastName:void 0,email:void 0,password:void 0,repassword:void 0,address:void 0,city:void 0,zipCode:void 0,phoneNumber:void 0,isNextFormSelected:!1,errorMessage:void 0},s.signUp=s.signUp.bind(Object(N.a)(s)),s.handleOnChange=s.handleOnChange.bind(Object(N.a)(s)),s}return Object(C.a)(a,[{key:"signUp",value:function(){var e=this,t={firstName:this.state.firstName,lastName:this.state.lastName,email:this.state.email,password:this.state.password,address:this.state.address,city:this.state.city,zipCode:this.state.zipCode,phoneNumber:this.state.phoneNumber};z.a.post("/api/register",t).then((function(e){window.location.href="/sign-in"})).catch((function(t){e.setState({errorMessage:m(t.response)})}))}},{key:"selectPreviousForm",value:function(){this.setState({isNextFormSelected:!1})}},{key:"selectNextForm",value:function(){this.state.password===this.state.repassword?this.state.password.length>7?this.setState({isNextFormSelected:!0,errorMessage:void 0}):this.setState({errorMessage:"Has\u0142o jest za kr\xf3tkie! Powinno sk\u0142ada\u0107 si\u0119 z co najmniej 8 znak\xf3w."}):this.setState({errorMessage:"Has\u0142a si\u0119 r\xf3\u017cni\u0105!"})}},{key:"handleOnChange",value:function(e){this.setState(Object(I.a)({},e.target.name,e.target.value))}},{key:"componentDidMount",value:function(){null!==sessionStorage.getItem("token")&&b()}},{key:"render",value:function(){var e=this,t=this.state,a=t.firstName,s=t.lastName,n=t.email,i=t.password,o=t.repassword,r=t.address,c=t.city,l=t.zipCode,d=t.phoneNumber,h=t.isNextFormSelected,j=t.errorMessage;return Object(k.jsx)("div",{className:"content",children:Object(k.jsxs)("div",{className:"sign-form",children:[Object(k.jsx)("h2",{children:"Tworzenie nowego konta"}),Object(k.jsxs)("div",{className:"user-info ".concat(h?"slide-out-left":"slide-in-right"),children:[Object(k.jsx)("input",{type:"text",name:"firstName",placeholder:"IMI\u0118",autoComplete:"off1",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"text",name:"lastName",placeholder:"NAZWISKO",autoComplete:"off2",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"email",name:"email",placeholder:"E-MAIL",autoComplete:"off3",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"password",name:"password",placeholder:"HAS\u0141O",minLength:"8",maxLength:"16",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"password",name:"repassword",placeholder:"POWT\xd3RZ HAS\u0141O",minLength:"8",maxLength:"16",onChange:this.handleOnChange}),j&&Object(k.jsx)("div",{className:"error-message",children:j}),Object(k.jsx)("button",{disabled:!a||!s||!n||!i||!o,onClick:function(){return e.selectNextForm()},children:"Dalej"})]}),Object(k.jsxs)("div",{className:"user-contact ".concat(h?"slide-in-left":"slide-out-right"),children:[Object(k.jsx)("input",{type:"text",name:"address",placeholder:"ADRES",autoComplete:"off4",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"text",name:"city",placeholder:"MIEJSCOWO\u015a\u0106",autoComplete:"off5",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"text",name:"zipCode",placeholder:"KOD POCZTOWY",pattern:"\\d*",maxLength:"5",autoComplete:"off6",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"text",name:"phoneNumber",placeholder:"NUMER TELEFONU",pattern:"\\d*",maxLength:"9",autoComplete:"off7",onChange:this.handleOnChange}),j&&Object(k.jsx)("div",{className:"error-message",children:j}),Object(k.jsx)("button",{className:"secondary",onClick:function(){return e.selectPreviousForm()},children:"Wr\xf3\u0107"}),Object(k.jsx)("button",{disabled:!r||!c||!l||!d,onClick:this.signUp,children:"Za\u0142\xf3\u017c konto"})]})]})})}}]),a}(n.a.Component),W=function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var s;return Object(y.a)(this,a),(s=t.call(this,e)).state={bookId:s.props.match.params.bookId,book:{},bookName:void 0,bookAuthor:void 0,bookImage:void 0,bookQuantity:void 0,bookCategories:[],availableCopies:void 0,isModalOpen:!1,isBookModalOpen:!1,message:void 0},s.addReservation=s.addReservation.bind(Object(N.a)(s)),s.updateBook=s.updateBook.bind(Object(N.a)(s)),s.addCategoryToBook=s.addCategoryToBook.bind(Object(N.a)(s)),s.deleteCategoryFromBook=s.deleteCategoryFromBook.bind(Object(N.a)(s)),s.handleOnChange=s.handleOnChange.bind(Object(N.a)(s)),s.setModalStatus=s.setModalStatus.bind(Object(N.a)(s)),s}return Object(C.a)(a,[{key:"addReservation",value:function(){var e=this;z.a.post("/api/reservations/"+this.state.bookId).then((function(t){e.setState({isModalOpen:!0,message:"Rezerwacja si\u0119 powiod\u0142a! Masz 2 dni na odbi\xf3r ksi\u0105\u017cki."})})).catch((function(t){e.setState({isModalOpen:!0,message:m(t.response)})}))}},{key:"updateBook",value:function(){var e=this,t={name:this.state.bookName,author:this.state.bookAuthor,image:this.state.bookImage,quantity:this.state.bookQuantity,categories:this.state.bookCategories};z.a.put("/api/library/books/"+this.state.bookId,t).then((function(t){var a=t.data.book;e.setState({book:a,bookName:a.name,bookAuthor:a.author,bookImage:a.image,bookQuantity:a.quantity,bookCategories:a.categories.map((function(e){return e.name})),availableCopies:t.data.availableCopies,isBookModalOpen:!1})})).catch((function(t){console.log(t),e.setState({errorMessage:m(t.response)})}))}},{key:"setModalStatus",value:function(e){this.setState({isModalOpen:e})}},{key:"setBookModalStatus",value:function(e){this.setState({isBookModalOpen:e})}},{key:"handleOnChange",value:function(e){var t;this.setState((t={},Object(I.a)(t,e.target.name,e.target.value),Object(I.a)(t,"errorMessage",void 0),t))}},{key:"addCategoryToBook",value:function(e){var t=e.target.value,a=this.state,s=a.bookCategories,n=a.displayedCategories;s.push(t),n.splice(n.indexOf(t),1),this.setState({bookCategories:s,displayedCategories:n})}},{key:"deleteCategoryFromBook",value:function(e){var t=this.state,a=t.bookCategories,s=t.displayedCategories;a.splice(a.indexOf(e),1),s.push(e),this.setState({bookCategories:a,displayedCategories:s})}},{key:"componentDidMount",value:function(){var e=this;z.a.get("/api/books/"+this.state.bookId).then((function(t){var a=t.data.book;e.setState({book:a,bookName:a.name,bookAuthor:a.author,bookImage:a.image,bookQuantity:a.quantity,bookCategories:a.categories.map((function(e){return e.name})),availableCopies:t.data.availableCopies})})).catch((function(t){e.setState({isModalOpen:!0,message:m(t.response)})})),z.a.get("/api/categories").then((function(t){var a=t.data.map((function(e){return e.name}));a=a.sort((function(e,t){return e<t?-1:e>t?1:0})),e.setState({categories:a.slice(),displayedCategories:a.slice()})})).catch((function(t){e.setState({errorMessage:m(t.response)})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.book,s=t.bookName,n=t.bookAuthor,i=t.bookImage,o=t.bookQuantity,r=t.bookCategories,d=t.displayedCategories,h=t.availableCopies,j=this.state,u=j.isModalOpen,b=j.isBookModalOpen,m=j.message,p=sessionStorage.getItem("token"),g=O();return Object(k.jsxs)("div",{className:"content",children:[u&&Object(k.jsx)(U,{message:m,setModalStatus:this.setModalStatus}),b&&Object(k.jsx)("div",{className:"modal",children:Object(k.jsxs)("div",{className:"modal-container",children:[Object(k.jsx)("i",{className:"fas fa-times",onClick:function(){return e.setBookModalStatus(!1)}}),Object(k.jsxs)("div",{className:"sign-form",children:[Object(k.jsx)("h2",{children:"Edycja danych ksi\u0105\u017cki"}),Object(k.jsx)("input",{type:"text",name:"bookName",value:s,placeholder:"TYTU\u0141 KSI\u0104\u017bKI",autoComplete:"off1",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"text",name:"bookAuthor",value:n,placeholder:"AUTOR",autoComplete:"off2",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"text",name:"bookImage",value:i,placeholder:"OK\u0141ADKA (URL)",autoComplete:"off3",onChange:this.handleOnChange}),Object(k.jsx)("input",{type:"number",name:"bookQuantity",value:o,placeholder:"ILO\u015a\u0106 EGZEMPLARZY",autoComplete:"off4",onChange:this.handleOnChange}),Object(k.jsx)("div",{className:"category-container",children:r!==[]&&r.map((function(t){return Object(k.jsxs)("div",{className:"book-category",onClick:function(){return e.deleteCategoryFromBook(t)},children:[t,Object(k.jsx)("i",{className:"fas fa-times-circle"})]},t)}))}),Object(k.jsxs)("select",{name:"selectedCategory",selected:"Wybierz kategorie:",onChange:this.addCategoryToBook,children:[Object(k.jsx)("option",{children:"Wybierz kategorie:"}),d&&d.map((function(e){return Object(k.jsx)("option",{children:e},e)}))]}),m&&Object(k.jsx)("div",{className:"error-message",children:m}),Object(k.jsx)("button",{disabled:!s||!n||!o,onClick:this.updateBook,children:"Zapisz"})]})]})}),Object.keys(a).length>0?Object(k.jsxs)("div",{className:"book-container",children:[Object(k.jsx)("div",{className:"book-image",children:null!==a.image?Object(k.jsx)("img",{src:a.image,alt:a.name}):Object(k.jsx)("div",{children:Object(k.jsx)("i",{className:"fas fa-camera"})})}),Object(k.jsxs)("div",{className:"book-info",children:[Object(k.jsx)("h2",{children:a.name}),Object(k.jsx)("div",{className:"book-detail",children:a.author}),Object(k.jsx)("div",{className:"category-container",children:a.categories&&a.categories.map((function(e){var t=e.id,a=e.name;return Object(k.jsx)("div",{className:"book-category",onClick:function(){return window.location.href="/books?category="+a},children:a},t)}))}),Object(k.jsxs)("div",{className:"book-detail",children:["Ilo\u015b\u0107 dost\u0119pnych sztuk: ",h]}),Object(k.jsxs)("div",{className:"book-reservation",children:[g===l.student&&Object(k.jsx)("button",{onClick:this.addReservation,disabled:null===p||h<1,children:"Zarezerwuj"}),(g===l.admin||g===l.librarian)&&Object(k.jsx)("button",{className:"orange",onClick:function(){return e.setBookModalStatus(!0)},children:"Edytuj dane ksi\u0105\u017cki"}),!p&&Object(k.jsxs)("div",{className:"message",children:["Aby zarezerwowa\u0107 ksi\u0105\u017ck\u0119, konieczne jest posiadanie konta w systemie. ",Object(k.jsx)(c.b,{to:{pathname:"/sign-in",state:{prevPath:window.location.pathname}},children:"Zaloguj si\u0119"})," lub ",Object(k.jsx)("a",{href:"/sign-up",children:"Za\u0142\xf3\u017c konto"}),"."]})]})]})]}):Object(k.jsx)("h2",{style:{textAlign:"center"},children:"Nie znaleziono ksi\u0105\u017cki."})]})}}]),a}(s.Component),K=function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var s;return Object(y.a)(this,a),(s=t.call(this,e)).state={userId:s.props.match.params.userId,user:{},forbidden:!1},s}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this;z.a.get("/api/library/users/"+this.state.userId).then((function(t){e.setState({user:t.data})})).catch((function(t){e.setState({message:m(t.response)})}));var t=O();null!==sessionStorage.getItem("token")&&t!==l.student||this.setState({forbidden:!0})}},{key:"render",value:function(){var e=this.state,t=e.user;return e.forbidden?Object(k.jsx)(D,{type:l.admin}):Object(k.jsx)("div",{className:"content",children:Object.keys(t).length>0?Object(k.jsxs)("div",{className:"user-profile",children:[Object(k.jsxs)("div",{className:"user-info",children:[Object(k.jsx)("h2",{children:"Dane osobowe"}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Email:"}),Object(k.jsx)("input",{value:t.email,readOnly:!0})]}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Imi\u0119:"}),Object(k.jsx)("input",{value:t.firstName,readOnly:!0})]}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Nazwisko:"}),Object(k.jsx)("input",{value:t.lastName,readOnly:!0})]})]}),Object(k.jsxs)("div",{className:"user-contact",children:[Object(k.jsx)("h2",{children:"Dane kontaktowe"}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Adres:"}),Object(k.jsx)("input",{name:"address",value:t.address,readOnly:!0})]}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Miejscowo\u015b\u0107:"}),Object(k.jsx)("input",{name:"city",value:t.city,readOnly:!0})]}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Kod pocztowy:"}),Object(k.jsx)("input",{name:"zipCode",value:t.zipCode,readOnly:!0})]}),Object(k.jsxs)("div",{className:"user-item",children:[Object(k.jsx)("label",{children:"Telefon:"}),Object(k.jsx)("input",{name:"phoneNumber",value:t.phoneNumber,readOnly:!0})]})]})]}):Object(k.jsx)("h2",{style:{textAlign:"center"},children:"Nie znaleziono u\u017cytkownika."})})}}]),a}(n.a.Component),Q=function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var s;return Object(y.a)(this,a),(s=t.call(this,e)).state={users:[],forbidden:!1,isModalOpen:!1,errorMessage:void 0},s.updateUserRole=s.updateUserRole.bind(Object(N.a)(s)),s.setModalStatus=s.setModalStatus.bind(Object(N.a)(s)),s}return Object(C.a)(a,[{key:"updateUserRole",value:function(e,t){var a=this;z.a.put("/api/admin/users/ "+e+"?newRole="+t).then((function(t){var s=a.state.users,n=s.findIndex((function(t){return t.id===e}));s[n]=t.data,a.setState({users:s,errorMessage:"Uprawnienia u\u017cytkownika zaktualizowano pomy\u015blnie!",isModalOpen:!0})})).catch((function(e){a.setState({errorMessage:m(e.response)})}))}},{key:"setModalStatus",value:function(e){this.setState({isModalOpen:e,errorMessage:void 0})}},{key:"componentDidMount",value:function(){var e=this;z.a.get("/api/admin/users").then((function(t){e.setState({users:t.data})})).catch((function(t){e.setState({errorMessage:m(t.response)})}));var t=O();(null===sessionStorage.getItem("token")||[l.student,l.librarian].includes(t))&&this.setState({forbidden:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,s=t.forbidden,n=t.isModalOpen,i=t.errorMessage;return s?Object(k.jsx)(D,{type:l.admin}):Object(k.jsxs)("div",{className:"content",children:[n&&Object(k.jsx)(U,{message:i,setModalStatus:this.setModalStatus}),Object(k.jsxs)("table",{children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Imie i Nazwisko"}),Object(k.jsx)("th",{children:"Email"}),Object(k.jsx)("th",{children:"Uprawnienia"}),Object(k.jsx)("th",{children:"Dzia\u0142ania"})]})}),Object(k.jsx)("tbody",{children:a&&a.map((function(t){var a=t.id,s=t.firstName,n=t.lastName,i=t.email,o=t.role;return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:Object(k.jsxs)("a",{href:"/users/"+a,children:[s," ",n]})}),Object(k.jsx)("td",{children:i}),Object(k.jsx)("td",{children:g(o)}),Object(k.jsxs)("td",{children:[o===l.student&&Object(k.jsx)("button",{className:"green",onClick:function(){return e.updateUserRole(a,"LIBRARIAN")},children:"Mianuj bibliotekarzem"}),o===l.librarian&&Object(k.jsx)("button",{className:"red",onClick:function(){return e.updateUserRole(a,"STUDENT")},children:"Zmniejsz uprawnienia"})]})]},a)}))})]})]})}}]),a}(s.Component);var H=function(){var e=sessionStorage.getItem("token");return Object(k.jsx)("div",{className:"App",children:Object(k.jsxs)(c.a,{children:[Object(k.jsx)(v,{token:e}),Object(k.jsxs)(x.c,{children:[Object(k.jsx)(x.a,{exact:!0,path:"/books/:bookId",component:W}),Object(k.jsx)(x.a,{path:["/books?category:category","/books"],component:A}),Object(k.jsx)(x.a,{path:"/reservations",component:L}),Object(k.jsx)(x.a,{path:"/sign-in",component:F}),Object(k.jsx)(x.a,{path:"/sign-up",component:Z}),Object(k.jsx)(x.a,{path:"/profile",component:T}),Object(k.jsx)(x.a,{path:"/users/:userId",component:K}),Object(k.jsx)(x.a,{path:"/users",component:Q}),Object(k.jsx)(x.a,{path:["","/home"],component:f})]})]})})};z.a.defaults.baseURL="http://localhost:8080",null!==sessionStorage.getItem("token")&&(z.a.defaults.headers.common.Authorization="Bearer "+sessionStorage.getItem("token")),o.a.render(Object(k.jsx)(n.a.StrictMode,{children:Object(k.jsx)(H,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.6243257d.chunk.js.map